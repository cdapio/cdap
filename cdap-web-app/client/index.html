<!doctype html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>CDAP</title>
  <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon_16x16.ico">

  <meta name="description" content="">
  <meta name="author" content="Cask Data, Inc.">
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">

  <script type="text/javascript">

    window.ENV = window.ENV || {};
    ENV.EXPERIMENTAL_CONTROL_HELPER = true

  </script>

  <script type="text/javascript" src="/core/lib/jquery-1.9.1.js"></script>
  <script type="text/javascript" src="/third_party/bootstrap/js/bootstrap.js"></script>
  <script type="text/javascript" src="/core/lib/handlebars.js"></script>
  <script type="text/javascript" src="/core/lib/ember-1.0.0-rc.5.js"></script>
  <script type="text/javascript" src="/core/lib/jquery.timeago.js"></script>
  <script type="text/javascript" src="/core/lib/jquery.jsPlumb-1.3.6-all.js"></script>
  <script type="text/javascript" src="/core/lib/d3.v3.js"></script>
  <script type="text/javascript" src="/core/lib/string.min.js"></script>
  <script type="text/javascript" src="/core/lib/jquery.taboverride.js"></script>
  <script type="text/javascript" src="/core/lib/jquery.cookie.js"></script>
  <script type="text/javascript" src="/core/lib/jquery.color-2.1.2.min.js"></script>
  <script type="text/javascript" src="/core/lib/require.js" data-main="main"></script>

  <script src="/core/lib/rickshaw.js"></script>
  <script src="/third_party/select2/select2.min.js"></script>

  <link rel="stylesheet" href="/third_party/rickshaw/rickshaw.min.css">
  <link rel="stylesheet" href="/third_party/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="/third_party/select2/select2.css">
  <link rel="stylesheet" href="/assets/css/new/main.css">

  <script>(function(){var uv=document.createElement('script');uv.type='text/javascript';uv.async=true;uv.src='//widget.uservoice.com/dFjjpiFcT5p78aYB5bDzGA.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(uv,s)})()</script>

</head>
<body>
  <div id="warning">
    <div>
      <img src="/assets/img/v2/warning-close.png" id="warning-close" />
      <span class="warning-text">Experiencing connection issues.</span>
    </div>
  </div>
  <script type="text/x-handlebars" data-template-name="application">
    <div id="header">
      <div class="left-float">
        <h2>Cask Data Application Platform</h2>
      </div>
      <div id="global">
      {{#if C.Env.security_enabled}}
          {{#if C.Env.auth_token}}
            <a class="general-link logout-link" href="/logout" id="header-logout">Logout</a>
          {{else}}
            <a class="general-link login-link" href="/#/login" id="header-login">Login</a>
          {{/if}}
          {{#if C.Env.authenticated}}
            <a class="general-link logout-link" href="https://accounts.continuuity.com/logout">Logout</a>
            <a href="javascript:void(0)" data-uv-lightbox="classic_widget" data-uv-mode="full" data-uv-primary-color="#cc6d00" data-uv-link-color="#007dbf" data-uv-default-mode="support" data-uv-forum-id="194926" class="support-link">Support</a>
            <a href="https://accounts.continuuity.com/profile" class="user-link" target="_blank">{{C.Env.user.name}}</a>
            <a href="#" class="cloud-link">{{C.Env.cluster.vpc_label}}</a>
          {{else}}
            {{#unless C.isEnterprise}}
            <a href="javascript:void(0)" data-uv-lightbox="classic_widget" data-uv-mode="full" data-uv-primary-color="#cc6d00" data-uv-link-color="#007dbf" data-uv-default-mode="support" data-uv-forum-id="194926" class="support-link">Support</a>
            {{/unless}}
            <div class="pull-right user-link my-account small-pad" style="position: relative; width: 140px;text-align: center;">
              <div class="dropdown" data-toggle="dropdown">
                <div class="text-span">  <img id="loading-time-select-img" src="/assets/img/start-all-load.gif" />My account</div>
              </div>
                <ul class="dropdown-menu top-dropdown-listholder" style="text-align: left; margin-top: -5px;">
                  <li><a href="/#/accesstoken">Access token</a></li>
                </ul>
            </div>
          {{/if}}
      {{/if}}

      <a href="#/services" class="general-link services-link topmenu-top-padding">Services
        <span id="failed-services-container">
          <span id="failed-services"></span>
        </span>
      </a>

      <a href="#/analyze" class="metrics-link" id="header-metrics">Metrics</a>
      </div>
    </div>
    <div id="nav">
      <ul>
        <li class="logo-holder">
          <a href="#">
            <div class="left-nav-icon" id="logo"></div>
          </a>
        </li>
        <li class="overview"><a class="nav-link nav-dash" id="nav-overview" href="#">
          <span class="left-nav-icon"></span>

          Application
        </a></li>
        <li><a class="nav-link nav-streams" id="nav-collect" href="#/streams">
          <span class="left-nav-icon"></span>
          Collect</a></li>
        <li><a class="nav-link nav-flows" id="nav-process" href="#/flows">
          <span class="left-nav-icon"></span>

          Process</a></li>
        <li><a class="nav-link nav-datasets" id="nav-store" href="#/datasets">
          <span class="left-nav-icon"></span>

          Store</a></li>
          {{#if C.Env.explore_enabled}}
            <li>
              <a class="nav-link nav-queries"
                 id="nav-queries"
                 href="#/dataexplore/query"
              >

          {{else}}
            <li class="disabled">
              <a class="nav-link nav-queries"
                 id="nav-queries"
              >
          {{/if}}
            <span class="left-nav-icon"></span>
          Query</a></li>
      </ul>
    </div>
    <div id="content-body">
      {{!--       <div class="breadcrumbs-container">
        {{view C.Embed.Breadcrumb}}
        <div style="clear:both"></div>
      </div> --}}
      {{outlet}}

    </div>
    <div id="footer" style="clear: both;"><span id="copyright">COPYRIGHT &copy; 2014-2015 CASK DATA INC. ALL RIGHTS RESERVED.</span><br />

    <a href="http://cask.co/company/terms" target="_blank" id="footer-terms" target="blank">Terms</a>
    <span>&nbsp;·&nbsp;</span>
    <a href="http://cask.co/company/privacy" target="_blank" id="footer-terms" target="blank">Privacy</a>
    <span>&nbsp;·&nbsp;</span>
    <a href="http://cask.co/company/#company-contact" target="_blank" id="footer-contact" target="blank">Contact</a>
    {{#unless C.isEnterprise}}
    <span>&nbsp;·&nbsp;</span>
    <a href="javascript:void(0)" data-uv-lightbox="classic_widget" data-uv-mode="full" data-uv-primary-color="#cc6d00" data-uv-link-color="#007dbf" data-uv-default-mode="support" data-uv-forum-id="194926" id="footer-support">Support</a>
    {{/unless}}
    {{#if C.isLocal}}
    <span>&nbsp;·&nbsp;</span>
    <a style="text-decoration:underline;" id="footer-reset" href="#" onclick="return C.Util.reset();">Reset</a>
    {{/if}}
    <span id="build-number"></span>
    </div>
    <div id="drop-hover">
      <div id="drop-border"><div id="drop-loading"></div><div id="drop-label">Drop here to deploy.</div></div>
    </div>

    <div id="nux-completed-modal" class="popup-modal">
      <div class="popup-container">
        <div id="nux-1">
          <div class="popup-body">
            <h2>And you’re done!</h2>

            <h3>Now you’ve completed:</h3>

            <ol>
              <li>injecting an Event into a Stream;</li>
              <li>seeing the Event being processed by a Flow; and</li>
              <li>using a Procedure to query a DataSet to obtain the results.</li>
            </ol>

            <p>These are the basics of the Cask Data Application Platform.</p>
            <p>For a programming quickstart, follow the <a target="_blank" href="http://www.cask.co/resources/">instructions online</a> about modifying the code and redeploying the app.</p>

          </div>
          <div class="modal-footer">
            <button onclick="C.Util.NUX.restart();" class="btn btn-blank">Restart</button>
            <button onclick="$('#nux-completed-modal').fadeOut();" class="btn btn-blank">Finish</button>
          </div>
        </div>
      </div>
    </div>

  </script>

  <script type="text/x-handlebars" data-template-name="Services">
    <div id="title">
      <h1><span>Services</span></h1>
    </div>

    <div id="cdap-services">
      <div id="panels">


        {{#if systemServices}}
        <div class="panel">
          <table class="table">
            <thead>
              <th style="padding-left: 14px; min-width: 350px" class="service-col">Name</th>
              <th style="min-width: 100px;" class="status-col center-align">Status</th>
              <th style="min-width: 100px;" class="logs-col center-align">Logs</th>
              <th style="min-width: 200px;" class="instance-col center-align">Instances Requested</th>
              <th style="min-width: 200px;" class="instance-col center-align">Provisioned</th>
            </thead>
            <tbody>
            {{#each service in systemServices}}
              <tr>
                <td style="max-width: 350px;" class="app-list-name service-col"><a class="none-text-decoration">
                  {{service.name}}
                  </a>
                  <br />
                  <span class="app-list-status">{{service.description}}</span>
                </td>
                <td style="max-width: 100px;" class="status-col center-align">
                  <span {{ bindAttr class=":service-icon service.imgClass" }} ></span>
                </td>
                <td style="max-width: 100px;" class="status-col center-align">
                  {{#if service.logsStatusOk}}
                    {{#linkTo 'Service.Log' service}}<span {{ bindAttr class=":log-icon service.logClass" }} ></span>{{/linkTo}}
                  {{ else }}
                    <span data-toggle="tooltip" data-placement="right" title="Please contact your system administrator for logs.">NA</span>
                  {{/if}}
                </td>
                <td style="max-width: 200px;" class="instance-col center-align">
                  <div class="instances-requested">
                    <div>
                    <form {{action "changeInstances" service on="submit"}}>
                      {{input keyUp=keyPressed placeholder=service.requested value=service.instancesInput class="services-instances-input" }}
                    </form>
                    </div>
                    <div>
                      <button class="btn btn-blank btn-set" disabled="true" {{action changeInstances service on="click"}}>SET</button>
                    </div>
                  </div>
                </td>
                <td style="max-width: 350px;" class="instance-provisioned service-col center-align">
                    <div class="instance-num auto-margin"><span>{{service.provisioned}}</span></div>
                </td>
              </tr>
            {{/each}}
            </tbody>
          </table>
        </div>
      {{/if}}

      </div>
    </div>

    {{outlet}}
  </script>


  <script type="text/x-handlebars" data-template-name="Service">

    <div id="title">
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo Service.Log model}}Log{{/linkTo}}</li>
      </ul>
      <h1><span>Service</span> {{model.name}}</h1>
    </div>


    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="UserserviceStatus">
  {{#if model}}
    <div id="info">
      <div class="info-box">
        <div class="flow-state">
            <strong>{{model.name}}</strong>
        </div>
      </div>
      <div class="info-box">
      <div class="handlerinstances">
        <table class="table">
          <thead>
          <tr><th colspan=2 style="min-width: 200px; text-align: center;">Handler Instances</th></tr>
          </thead>
          <thead>
          <tr>
            <th style="min-width: 100px;" class="center-align">Requested</th>
            <th style="min-width: 100px;" class="center-align">Active</th>
          </tr>
          </thead>
          <tbody>

            <tr>
              <td style="max-width: 200px;" class="instance-col center-align">
                <div class="instance-wrapper">
                  <div>
                    <form {{action "runnableChangeInstances" model model.handler on="submit"}}>
                      {{input keyUp=keyPressed placeholder=model.handler.requested value=model.handler.instancesInput class="services-instances-input" }}
                    </form>
                  </div>
                  <div>
                    <button class="btn btn-blank btn-set" disabled="true" {{action runnableChangeInstances model model.handler on="click"}}>SET</button>
                  </div>
                </div>
              </td>
              <td class="instance-provisioned service-col center-align">
                  <div class="instance-num auto-margin"><span>{{model.handler.provisioned}}</span></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      </div>
      <div class="info-box" style="float: right; border: 0;">
        <div id="action-buttons" class="btn-group pull-right">
          <button class="btn btn-blank btn-icon" {{action "config"}}><span class="btn-config"></span></button>
          <div class="start-stop-wrapper">
            <button class="btn btn-blank start-stop" {{bindAttr disabled="model.startStopDisabled"}} style="width:64px;" {{action "exec" on="click"}}><span {{bindAttr class="model.actionIcon"}}></span><span>{{model.defaultAction}}</span></button>
          </div>
        </div>
        <div class="flow-state"><strong>{{model.currentState}}</strong></div>
      </div>
    </div>

    {{#if model.workersList}}
    <div id="panels">
      <h2>Service Workers</h2>
      <br />
      <div class="panel">
          <table class="table">
            <thead>
              <tr>
                <th style="padding-left: 14px; min-width: 200px" class="service-col">Name</th>
                <th style="min-width: 200px;" class="center-align">Instances Requested</th>
                <th style="min-width: 200px;" class="center-align">Instances Active</th>
              </tr>
            </thead>
            <tbody>
              {{#each runnable in model.workersList}}
                <tr>
                  <td class="app-list-name service-col"><a class="none-text-decoration">
                    {{runnable.id}}
                    </a>
                    <br />
                    {{!-- <span class="app-list-status pull-left"></span> --}}
                  </td>
                  <td style="max-width: 200px;" class="instance-col center-align">
                    <div class="instance-wrapper">
                      <div>
                        <form {{action "runnableChangeInstances" model runnable on="submit"}}>
                          {{input keyUp=keyPressed placeholder=runnable.requested value=runnable.instancesInput class="services-instances-input" }}
                        </form>
                      </div>
                      <div>
                        <button class="btn btn-blank btn-set" disabled="true" {{action runnableChangeInstances model runnable on="click"}}>SET</button>
                      </div>
                    </div>
                  </td>
                  <td class="instance-provisioned service-col center-align">
                      <div class="instance-num auto-margin"><span>{{runnable.provisioned}}</span></div>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
      </div>
    </div>
    {{/if}}

  {{outlet config}}

  {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="Userservice">

    <div id="title">
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo UserserviceStatus model}}Status{{/linkTo }}</li>
        <li>{{#linkTo Userservice.History model}}History{{/linkTo}}</li>
        <li>{{#linkTo Userservice.Log model}}Log{{/linkTo}}</li>
      </ul>
      <h1><span>Service</span> <a {{bindAttr href="model.appHref"}}>{{model.app}}</a> : {{model.name}}</h1>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="DataExploreResults">
  <hr style="margin-top: 0px"/>
  <div class="data-explore-results">


  {{#if objArr}}
    <table class="table" id="query-list-table">
      <thead>
        <th class="arrows"><div class="arrowHolder"></div></th>
        <th class="time-started">Time Started</th>
        <th class="query-status">Status</th>
        <th class="result-icons">Results</th>
        <th class="sql-statements">Query</th>
      </thead>
    </table>
    {{#each objArr}}
    <div style="overflow: auto;">
    <table {{bindAttr id="query_handle_hashed"}} data-toggle="tooltip" data-placement="top" title="No results" data-trigger="manual" {{bindAttr class=":table :cursor-pointer :query-table-entry this.isSelected:selected:notselected" }} {{ action tableClicked this }}>
      <tbody>
        <tr>
          <td class="arrows">
            <div class="arrowHolder">
            {{#if this.isSelected}}
              <div class="arrow-down"> </div>
            {{ else }}
              <div class="arrow-right"> </div>
            {{/if}}
            </div>
          </td>
          <td class="time-started">
            <span class="lighter-color">{{time_started}}</span>
          </td>
          <td class="query-status">
            <span {{bindAttr class=":query-status status"}}>
              {{status}}
            </span>
          </td>
          <td class="results-icons">
              {{#if has_results}}
                {{#if is_active}}
                  <a data-toggle="tooltip" data-placement="right" title="Download" trigger="hover" {{action download this bubbles=false}} class="download-query-results-btn"></a>
                {{ else }}
                  <a data-toggle="tooltip" data-placement="right" title="Results Not Available" trigger="hover" class="download-query-results-disabled-btn"></a>
                {{/if}}
              {{ else }}
                <a data-toggle="tooltip" data-placement="right" title="No results" trigger="hover" class="download-query-results-disabled-btn"></a>
              {{/if}}
          </td>
          <td class="sql-statements"><span class="bolder-font">{{statement}}</span></td>
        </tr>
      </tbody>
    </table>
    </div>
        <div {{bindAttr id="query_handle"}} class="results-table-holder" style="display:none">
          <table class="table query-results-table-entry">
            <thead>
              {{#each schema}}
                <th>{{name}}</th>
              {{/each}}
            </thead>
            <tbody>
            {{#each preview_cached}}
              <tr>
              {{#each col in columns}}
                <td>{{col}}</td>
              {{/each}}
              </tr>
            {{/each}}
            </tbody>
          </table>
        </div>
    {{/each}}
    <div style="max-width:100%">
            <button data-toggle="tooltip" title="No more results." data-trigger="manual" data-placement="bottom" style="min-width:40px;" class="btn btn-blank btn-default nextBtn" id="execute-explore-query" {{action 'nextPage' on="click"}}>></button>
            <button data-toggle="tooltip" title="No more results." data-trigger="manual" data-placement="left" style="min-width:40px;" class="btn btn-blank btn-default prevBtn" id="execute-explore-query" {{action 'prevPage' on="click"}}><</button>
    </div>
  </div>
    {{ else }}
    <div class="object-list-empty" style="height:500px;padding-top:20px;">
        <div class="object-list-empty-content">
          <div>No Queries.</div>
          <span>Please submit a query before using this feature.</span>
        </div>
      </div>
  {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="DataExploreQuery">
    <div style="clear:both"></div>
    {{#if datasets}}
      <div class="dataexplore-titleholder">
        <div class="dataexplore-hivetable-title"> Hive Tables </div>
        <div class="dataexplore-information-title"> Information {{selectedDataset.name}} </div>
      </div>
      <div id="query-display">
        <div id="query-tables">
          <table class="table">
            {{#each datasets}}
            <tr {{action selectDataset this}}
                {{ bindAttr class=":cursor-pointer :table-name this.isSelected:selected:notselected" }}>
              <td class="app-list-name service-col dataset-name">
                <div
                  class="tablename-holder"
                  data-toggle="tooltip"
                  data-placement="right"
                  title=""
                  trigger="hover"
                  {{bindAttr data-original-title=tablename}}>
                    {{#if from_dataset}}
                      <div class="dataset-icon"> </div>
                    {{ else }}
                      <div class="dataset-icon hidden"> </div>
                    {{/if}}
                    <span class="app-list-status data-explore-table-name">{{tablename}}</span>
                    {{#if this.isSelected}}
                      <div class="arrow-right"></div>
                    {{/if}}
                </div>
              </td>
            </tr>
            {{/each}}
          </table>
        </div>
        <div class="table-info">
          <div class="query-schema">
            <div class="table-title" {{action 'showTableSchema' on="click"}}>
             {{#if schemaArrowRight}}
                <div class="arrow-down"></div>
             {{ else }}
                <div class="arrow-right-no-floats"></div>
             {{/if}}
             <span>Table Schema </span>
            </div>
            {{#if showSchema}}
                {{#if selectedDataset.schemaTableEmpty }}
                  <div class="table-empty"> No Schema (A Table with No Schema??) </div>
                {{ else }}
                <div class="table-view">
                  <div class="table-header">
                    <span class="table-column-title three-column"> Column Name </span>
                    <span class="table-column-title three-column "> Column Type </span>
                    <span class="table-column-title three-column"> Comments </span>
                  </div>
                  {{#each selectedDataset.schema}}
                  <div class="table-row">
                    {{#each columns}}
                    <span {{bindAttr value="this"}}> {{this}} </span>
                    {{/each}}
                  </div>
                  {{/each}}
                </div>
                {{/if}}
            {{/if}}
          </div>
          <div class="query-partition">
            <div class="table-title" {{action 'showPartitionKeys' on="click"}}>
              {{#if partitionArrowRight}}
                <div class="arrow-down"></div>
              {{ else }}
                <div class="arrow-right-no-floats"></div>
              {{/if}}
              <span>Partition Keys</span>
            </div>
            {{#if showPartitions}}
                {{#if selectedDataset.partitionTableEmpty}}
                  <div class="table-empty"> No Partition Keys </div>
                {{ else }}
                <div class="table-view">
                  <div class="table-header">
                    <span class="table-column-title"> Column Name </span>
                    <span class="table-column-title"> Column Type </span>
                    <span class="table-column-title three-column"> Comments </span>
                  </div>
                  {{#each selectedDataset.partition}}
                  <div class="table-row">
                    {{#each columns}}
                    <span> {{this}} </span>
                    {{/each}}
                  </div>
                  {{/each}}
                 </div>
                {{/if}}
            {{/if}}
          </div>
          <div class="metadata-title table-title" {{action 'showTableProperties' on="click"}}>
            {{#if tablePropertiesArrowRight}}
              <div class="arrow-down"></div>
            {{ else }}
              <div class="arrow-right-no-floats"></div>
            {{/if}}
            <span>Table Properties</span>
          </div>
          {{#if showProperties}}
              <div class="metadata-wrapper">
                 <div class="table-view">
                  <div class="table-row">
                    <span> Table </span>
                    <span> {{selectedDataset.tablename}} </span>
                  </div>
                  <div class="table-row">
                    <span> Database </span>
                    <span> {{selectedDataset.dbname}} </span>
                  </div>
                  <div class="table-row">
                    <span> Owner </span>
                    <span> {{selectedDataset.owner}} </span>
                  </div>
                  <div class="table-row">
                    <span> Creation Time </span>
                    <span> {{selectedDataset.creationtime}} </span>
                  </div>
                 </div>
              </div>
          {{/if}}
        </div>
        <div style="clear:both"></div>
      </div>

  {{ else }}
    <div class="object-list-empty dataexplore-nodataset">
      {{#if C.showLoadingIcon}}
      <div class="loading-icon">
          <div class="overlay-background">
              <img src="/assets/img/loading_new.gif" />
          </div>
      </div>
      {{ else }}
      <div class="object-list-empty-content">
        <div>No discoverable dataset.</div>
        <span>Please add a discoverable dataset before using this feature.</span>
      </div>
      {{/if}}
    </div>
  {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="DataExplore">
    <div id="title">
      <h1>Explore</h1>
    </div>
    <div id="panels">
      <div class="panel">
         <ul class="nav nav-pills pull-left" id="explore-sub-menu">
           <li>{{#linkTo DataExplore.Query}}Query{{/linkTo }}</li>
           <li>{{#linkTo DataExplore.Results}}Results{{/linkTo}}</li>
         </ul>
         <div style="clear:both"></div>
         <hr style="margin-top: 0px"/>
        <td>
          <div data-toggle="popover"  title="Error" data-trigger="manual" data-placement="top" class="text-area-container">
          {{view C.Embed.Injector elementId="query-injector-input" valueBinding="controllers.SQLQueryString"}}
          </div>
          <button class="btn btn-blank btn-default" id="execute-explore-query" {{action 'submitSQLQuery' on="click"}}>Execute</button>
          <div style="clear:both"></div>
        </td>
        {{outlet}}

      </div>
    </div>
  </script>


  <script type="text/x-handlebars" data-template-name="Userservice/History">
    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="object-list">
          {{#if runs.length}}
            <table class="table table-condensed">
            <thead>
              <tr><th style="width: 300px;">Started</th>
              <th>Ended</th>
              <th style="width:250px;">Result</th>
              </tr>
            </thead>
            <tbody>
            {{#each runs}}
              <tr class="run-list">
                <td>{{started}}<div class="flow-run-date"> {{startDate}} </div></td>
                <td>{{ended}} <div class="flow-run-date"> {{endDate}}</div></td>
                <td>{{detail}}</td>
              </tr>
            {{/each}}
            </tbody>
            </table>
          {{else}}
            <div class="object-list-empty">
            <div class="object-list-empty-content">
            <div>No History.</div>
            <span>This Userservice has not completed a run yet.</span>
            </div>
            </div>
          {{/if}}
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Login">
    <div id="title">
      <h1>Login&nbsp;<span>Accounts</span></h1>
    </div>
    <div id="panels">
      <div class="panel">
        <div class="panel-body">
          <div class="warning">{{warning}}</div>
          {{view C.Embed.Login}}
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="login-view">
    <form method="POST" action="/login" id="login-form">
    <table>
      <tr>
        <td>Username</td>
        <td>{{input type="text" value=username class="username" name="username" }}</td>
      </tr>
      <tr>
        <td>Password</td>
        <td>{{input type="password" value=password class="password" name="password" }}</td>
      </tr>
      <tr>
        <td></td>
        <td>
        <button type="button" class="btn btn-blank btn-default" id="login-submit-btn">Login</button>
        </td>
      </tr>
    </table>
    </form>
  </script>

  <script type="text/x-handlebars" data-template-name="AccessToken">
    <div id="title">
      <h1 class="pull-left">
      {{#if token}}
        Account&nbsp;<span>Access Token</span>
        {{ else }}
        Please login again to get your Access Token
      {{/if}}
      </h1>
      {{#if token}}
        <div class="pull-right">
          <a class="btn btn-blue btn-default" href="/download-access-token/{{unbound token}}"><b>Download</b></a>
        </div>
      {{/if}}
      <div style="clear: both"></div>
    </div>
    <div id="panels">
      <div class="panel">
        <div class="panel-body">
          <div class="warning">{{warning}}</div>
          {{#if token}}
            <table class="table token-table" role="table">
              <tr>
                <td class="med-width bolder-font">Access Token</td>
                <td class="lrg-width">{{token}}</td>
              </tr>
              <tr>
                <td class="lrg-width bolder-font">Expires in</td>
                <td class="lrg-width">{{token_expires}} sec</td>
              </tr>
            </table>
            <br />
            <br />
            <h1>Usage</h1>
            <br />
            <div class="alert alert-info">
              This is a long-lasting Access Token that you can use to authenticate against CDAP. Access Tokens are used to identify and authenticate users.
            </div>
            <br />
            <table class="table" role="table">
              <tr>
                <td class="bolder-font">Step 1</td>
                <td>
                  Click Download button above.
                </td>
              </tr>
              <tr>
                <td class="bolder-font">Step 2</td>
                <td>
                  Save the downloaded file as ".cdap.accesstoken" in your home directory (~/).
                </td>
              </tr>
              <tr>
                <td class="bolder-font">Step 3</td>
                <td>
                  Run CDAP and use the provided tools with a secured CDAP.
                </td>
              </tr>
            </table>
            <br />
            <br />
            <br />
          {{else}}
            <form id="login-form">
            <table>
              <tr>
                <td>Username</td>
                <td>{{input type="text" value=username class="username" name="username" }}</td>
              </tr>
              <tr>
                <td>Password</td>
                <td>{{input type="password" value=password class="password" name="password" }}</td>
              </tr>
              <tr>
                <td></td>
                <td>
                <button class="btn btn-blank btn-default" {{action 'submit' on="click"}}>Login</button>
                </td>
              </tr>
            </table>
            </form>
          {{/if}}
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Overview">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      {{#if C.isEnterprise}}
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo Overview }}CDAP{{/linkTo}}</li>
        <li>{{#linkTo Resources }}Resources{{/linkTo}}</li>
      </ul>
      {{/if}}
      <h1>Overview</h1>
    </div>

    <div id="panels">
      <div class="quarter" id="quarter1">
        <div class="panel">
          <div class="quarter-title">Collect</div>
          <div class="quarter-value"><strong><span class="value-number">{{value.collect}}</span><span class="value-measure"> EPS</span></strong></div>
          {{view C.Embed.DashChart kind="collect"}}
        </div>
      </div>
      <div class="quarter" id="quarter2">
        <div class="panel">
          <div class="quarter-title">Process</div>
          <div class="quarter-value"><strong><span class="value-number">{{value.process}}</span><span class="value-measure">%</span></strong></div>
          {{view C.Embed.DashChart kind="process"}}
        </div>
      </div>
      <div class="quarter" id="quarter3">
        <div class="panel">
          <div class="quarter-title">Store</div>
          <div class="quarter-value"><strong><span class="value-number">{{value.store.label}}</span><span class="value-measure">{{value.store.unit}}/s</span></strong></div>
          {{view C.Embed.DashChart kind="store"}}
        </div>
      </div>
      <div class="quarter" id="quarter4">
        <div class="panel" style="margin-right: 0;">
          <div class="quarter-title">Query</div>
          <div class="quarter-value"><strong><span class="value-number">{{value.query}}</span><span class="value-measure"> QPS</span></strong></div>
          {{view C.Embed.DashChart kind="query"}}
        </div>
      </div>

      <div class="panel" style="clear: both;">
        <div class="panel-head">
          <input type="file" id="app-upload-input"/>
          {{view C.Embed.CreateButton entityType="Application"}}
          <div class="panel-title">Applications</div>
        </div>
        {{partial "apps-list"}}
      </div>
    </div>

  </script>

  <script type="text/x-handlebars" data-template-name="Resources">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo Overview }}CDAP{{/linkTo}}</li>
        <li>{{#linkTo Resources }}Resources{{/linkTo}}</li>
      </ul>
      <h1>Resources</h1>
    </div>
    <div id="panels">
      <div class="quarter">
        <div class="panel">
          <div class="quarter-title">AppFabric</div>
          <div class="quarter-value"><strong>{{value.containers}}</strong> Containers</div>
          {{view C.Embed.DashChart kind="containers"}}
        </div>
      </div>
      <div class="quarter">
        <div class="panel">
          <div class="quarter-title">Processors</div>
          <div class="quarter-value"><strong>{{value.cores}}</strong> Cores</div>
          {{view C.Embed.DashChart kind="cores"}}
        </div>
      </div>
      <div class="quarter">
        <div class="panel">
          <div class="quarter-title">Memory</div>
          <div class="quarter-value"><strong>{{value.memory.label}}</strong>{{value.memory.unit}} / <strong>{{total.memory.label}}</strong>{{total.memory.unit}}</div>
          {{view C.Embed.DashChart kind="memory"}}
        </div>
      </div>
      <div class="quarter">
        <div class="panel" style="margin-right: 0;">
          <div class="quarter-title">DataFabric</div>
          <div class="quarter-value"><strong>{{value.storage.label}}</strong>{{value.storage.unit}} / <strong>{{total.storage.label}}</strong>{{total.storage.unit}}</div>
          {{view C.Embed.DashChart kind="storage"}}
        </div>
      </div>
      <div class="panel clearfix" style="clear: both;">
        {{partial "programs-list"}}
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="App">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1><span>Application</span> {{model.name}}</h1>
    </div>

    <div id="info">
      <div class="info-box" style="float: right; border: 0;padding: 0px 14px 0px 0px;">
        <div class="app-level-buttons">
          <button class="btn btn-blank" {{action "delete" on="click"}}><img class="inbtn-img" src="/assets/img/v2/delete_icon.png" />Delete</button>
        </div>
      </div>
      <div class="info-box sparkline-box app-processed">{{view C.Embed.Chart metrics="/system/apps/{id}/process.events.processed" title="Processed"}}</div>
      <div class="info-box sparkline-box app-busyness">{{view C.Embed.Chart metrics="/system/apps/{id}/process.busyness" unit="percent" title="Busyness"}}</div>
      <div class="info-box app-storage" style="text-align: center;">
        <div class="sparkline-box-title">Storage</div>
        <div class="sparkline-box-value" style="padding-left: 0;padding-top: 23px;width: 100px;">{{model.storageLabel}}<span>{{model.storageUnits}}</span></div>
      </div>
    </div>

    <div id="panels">

      <div class="panel" id="collect-panel">
        <div class="panel-head"><div class="panel-title">Collect</div></div>
        {{partial "streams-list"}}
      </div>

      <div class="panel" id="process-panel">
        <div class="panel-head">
          {{#if elements.Flow.length}}
            <div class="start-stop-wrapper panel-controls">
              <div class="btn-group pull-right start-stop-btns" style="margin-top:2px;text-align:center;">
              <button {{action stopAll "Flow" on="click"}} class="btn-stop"><img src="/assets/img/v2/stop_active_icon.png" /></button>
                <button {{action startAll "Flow" on="click"}} class="btn start"><img src="/assets/img/v2/play_icon.png" /></button>

              </div>
              <img style="display: none;margin-top: 3px;" src="/assets/img/start-all-load-white.gif" />

            </div>
          {{/if}}
          <div class="panel-title">Process</div>
        </div>
        {{partial "flows-list"}}
      </div>

      <div class="panel" id="store-panel">
        <div class="panel-head"><div class="panel-title">Store</div></div>
        {{partial "datasets-list"}}
      </div>

      <div class="panel" id="userservice-panel">
        <div class="panel-head">
          {{#if elements.Userservice.length}}
            <div class="btn-group pull-right start-stop-btns" style="margin-top:2px;text-align:center;">
              <button {{action startAll "Userservice" on="click"}} class="btn start"><img src="/assets/img/v2/play_icon.png" /></button>
              <img style="display: none;margin-top: 3px;" src="/assets/img/start-all-load-white.gif" />
              <button {{action stopAll "Userservice" on="click"}} class="btn stop"><img src="/assets/img/v2/stop_active_icon.png" /></button>
            </div>
          {{/if}}
          <div class="panel-title">Service</div>
        </div>
        {{partial "userservices-list"}}
      </div>
    </div>

  </script>

  <script type="text/x-handlebars" data-template-name="List">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1><span>Data</span> {{title}}</h1>
    </div>
    <div id="panels">
    <div class="panel">
    {{view controller.viewType}}
    </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Stream">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1><span>Stream</span> {{model.name}}</h1>
    </div>
    <div id="info">
      <div class="info-box sparkline-box">{{view C.Embed.Chart title="Arrival Rate" metrics="/system/streams/{id}/collect.events"}}</div>
      <div class="info-box" style="text-align: center;">
        <div class="sparkline-box-title">Storage</div>
        <div class="sparkline-box-value" style="padding-left: 0;padding-top:19px;width: 100px;">{{model.storageLabel}}<br /><span>{{model.storageUnits}}</span></div>
      </div>
      <div class="info-box" style="text-align: center;">
        <div class="sparkline-box-title">Events</div>
        <div class="sparkline-box-value" style="padding-top:19px;padding-left:0;width:100px;">{{model.eventsLabel}} {{model.eventsUnits}}<br /><span>Events</span></div>
      </div>
    </div>
    <div id="panels">
      <div class="panel">
      <div class="panel-head"><div class="panel-title">Attached Flows</div></div>

        {{partial "flows-list"}}

      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Workflow">
    <div id="title">
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo WorkflowStatus model}}Status{{/linkTo}}</li>
        <li>{{#linkTo Workflow.History model}}History{{/linkTo}}</li>
      </ul>
      <h1><span>Workflow</span> <a {{bindAttr href="model.appHref"}}>{{model.app}}</a> : {{model.name}}</h1>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="WorkflowStatus">

    <div id="info">
      <div class="info-box">
        <div id="workflow-next-run" style="float: left">
          <div class="sparkline-box-title">Next Scheduled Run</div>
          <div id="workflow-scheduled-runs">

            {{#if suspended}}
            <div class="flow-schedule">
                <strong>SUSPENDED</strong>
            </div>
            <div class="sparkline-box-title">Select "Resume" from the dropdown menu</div>
            {{else}}
              <div class="flow-schedule">
                <strong>{{timeToNextRun}}</strong>
              </div>
              <div class="sparkline-box-title">{{nextRunLabel}}</div>
            {{/if}}
          </div>
        </div>
      </div>
      <div class="info-box" style="float: right; border: 0;">
        <div id="action-buttons" class="btn-group pull-right">

          <button class="btn btn-blank dropdown-toggle" data-toggle="dropdown">
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li style="min-width:200px; padding:4px 16px 2px;">
              Full Schedule:
              {{#each elements.Schedule}}
                <div class="sparkline-box-title">{{this.time}}</div>
              {{/each}}
              {{#unless elements.Schedule.length}}
                <div class="sparkline-box-title">No Runs</div>
              {{/unless}}
            </li>
            {{#if suspended}}
              <li><a href="#" {{action "resume" on="click"}}>Resume Schedule</a></li>
            {{else}}
              <li><a href="#" {{action "suspend" on="click"}}>Suspend Schedule</a></li>
            {{/if}}
          </ul>

          <button class="btn btn-blank" {{bindAttr disabled="model.startStopDisabled"}} style="width:64px;" {{action "exec" on="click"}}><span {{bindAttr class="model.actionIcon"}}></span><span>{{model.defaultAction}}</span></button>
          <button class="btn btn-blank btn-icon" style="border-right:0;" {{bindAttr disabled="model.startStopDisabled"}} {{action "config"}}><span class="btn-config"></span></button>

        </div>
        <div class="flow-state"><strong>{{model.currentState}}</strong></div>
      </div>

    </div>

    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="batchviz-container">
          <div id="workflowviz" class="clearfix chart">
            {{#each elements.Action}}
            <div class="batch-item" {{bindAttr id="divId"}} {{action loadAction this}} style="cursor: pointer;">
              <div class="batch-icon batch-map">
                {{programType}}
                <div class="info-window">
                  {{#if running}}
                    <div class="window-icon running"></div>
                  {{else}}
                    <div class="window-icon"></div>
                  {{/if}}
                  <div class="batch-phase">{{programName}}</div>
                </div>
              </div>
            </div>
            {{/each}}
          </div>
        </div>
      </div>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="Workflow/History">

    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="object-list">
          {{#if runs.length}}
            <table class="table table-condensed">
            <thead>
              <tr><th style="width: 300px;">Started</th>
              <th>Ended</th>
              <th style="width:250px;">Result</th>
              </tr>
            </thead>
            <tbody>
            {{#each runs}}
              <tr class="run-list">
                <td>{{started}}<div class="flow-run-date"> {{startDate}} </div></td>
                <td>{{ended}} <div class="flow-run-date"> {{endDate}}</div></td>
                <td>{{detail}}</td>
              </tr>
            {{/each}}
            </tbody>
            </table>
          {{else}}
            <div class="object-list-empty">
            <div class="object-list-empty-content">
            <div>No History.</div>
            <span>This Workflow has not completed a run yet.</span>
            </div>
            </div>
          {{/if}}
        </div>
      </div>
    </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Mapreduce">

    <div id="title">
      {{view C.Embed.TimeSelector}}
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo MapreduceStatus model}}Status{{/linkTo}}</li>
        <li>{{#linkTo Mapreduce.Log model}}Log{{/linkTo}}</li>
        <li>{{#linkTo Mapreduce.History model}}History{{/linkTo}}</li>
      </ul>
      <h1>
        <span>Mapreduce</span>
        <span class="breadcrumb-app-name"><a {{bindAttr href="model.appHref"}}>{{model.app}}</a> : {{model.programName}}
        </span>
      </h1>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="MapreduceStatus">
    <div id="info">

      <div class="info-box" style="float: right; border: 0;">
        <div id="action-buttons" class="btn-group pull-right">
          <button class="btn btn-blank" {{bindAttr disabled="model.startStopDisabled"}} style="width:64px;" {{action "exec" on="click"}}><span {{bindAttr class="model.actionIcon"}}></span><span>{{model.defaultAction}}</span></button>
          <button class="btn btn-blank btn-icon" {{bindAttr disabled="model.startStopDisabled"}} {{action "config"}}><span class="btn-config"></span></button>
        </div>
        <div class="flow-state"><strong>{{model.currentState}}</strong></div>
      </div>

      <div class="info-box sparkline-box">{{view C.Embed.Chart metrics="/system/apps/{parent}/mapreduce/{id}/mappers/process.completion" title="Mapping" unit="percent"}}</div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart metrics="/system/apps/{parent}/mapreduce/{id}/reducers/process.completion" title="Reducing" unit="percent"}}</div>

    </div>
    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="batchviz-container">
          <div id="batchviz" class="clearfix chart">
            <div class="batch-item">
              <div id="batch-map" class="batch-icon batch-map">
                <div class="info-window">
                  <div class="batch-phase">MAP</div>
                  <div class="mapper-icon"></div>
                  <div>{{model.metricData.mappersEntriesIn}} IN</div>
                  <div>{{model.metricData.mappersEntriesOut}} OUT</div>
                </div>
              </div>
              {{#if model.running}}

              <progress {{bindAttr value="model.metricData.mappersCompletion" }} max="100"></progress>
              {{/if}}
            </div>
            <div class="batch-item">
              <div id="batch-reduce" class="batch-icon batch-reduce">
                <div class="info-window">
                  <div class="batch-phase">REDUCE</div>
                  <div class="reducer-icon"></div>
                  <div>{{model.metricData.reducersEntriesIn}} IN</div>
                  <div>{{model.metricData.reducersEntriesOut}} OUT</div>
                </div>
              </div>
              {{#if model.running}}

              <progress {{bindAttr value="model.metricData.reducersCompletion" }} max="100"></progress>
              {{/if}}
            </div>
          </div>
        </div>
      </div>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="Mapreduce/History">
    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="object-list">
          {{#if runs.length}}
            <table class="table table-condensed">
            <thead>
              <tr><th style="width: 300px;">Started</th>
              <th>Ended</th>
              <th style="width:250px;">Result</th>
              </tr>
            </thead>
            <tbody>
            {{#each runs}}
              <tr class="run-list">
                <td>{{started}}<div class="flow-run-date"> {{startDate}} </div></td>
                <td>{{ended}} <div class="flow-run-date"> {{endDate}}</div></td>
                <td>{{detail}}</td>
              </tr>
            {{/each}}
            </tbody>
            </table>
          {{else}}
            <div class="object-list-empty">
            <div class="object-list-empty-content">
            <div>No History.</div>
            <span>This Mapreduce job has not completed a run yet.</span>
            </div>
            </div>
          {{/if}}
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Spark">

    <div id="title">
      {{view C.Embed.TimeSelector}}
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo SparkStatus model}}Status{{/linkTo}}</li>
        <li>{{#linkTo Spark.Log model}}Log{{/linkTo}}</li>
        <li>{{#linkTo Spark.History model}}History{{/linkTo}}</li>
      </ul>
      <h1>
        <span>Spark</span>
        <span class="breadcrumb-app-name"><a {{bindAttr href="model.appHref"}}>{{model.app}}</a> : {{model.name}}
        </span>
      </h1>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="SparkStatus">

    <div id="info">

      <div class="info-box" style="float: right; border: 0;">
        <div id="action-buttons" class="btn-group pull-right">
          <button class="btn btn-blank" {{bindAttr disabled="model.startStopDisabled"}} style="width:64px;" {{action "exec" on="click"}}>
            <span {{bindAttr class="model.actionIcon"}}></span><span>{{model.defaultAction}}</span>
          </button>
          <button class="btn btn-blank btn-icon" {{bindAttr disabled="model.startStopDisabled"}} {{action "config"}}>
            <span class="btn-config"></span>
          </button>
        </div>
        <div class="flow-state"><strong>{{model.currentState}}</strong></div>
      </div>
    </div>
    <div id="panels">
      <div class="panel">
        <div class="sparks-metrics clearfix">
          <div class="spark-metrics-storage">
            <div class="title-storage">STORAGE</div>
            <div class="metric-row">{{model.metricsData.blockRemainingMemory}}MB Remaining</div>
            <div class="metric-row">{{model.metricsData.blockMaxMemory}}MB Max Available</div>
            <div class="metric-row">{{model.metricsData.blockUsedMemory}}MB Used</div>
            <div class="metric-row">{{model.metricsData.blockDiskSpaceUsed}}MB Used on disk</div>
          </div>
          <div class="spark-metrics-stages">
            <div class="title-stage">STAGES</div>
            {{view C.Embed.StackedProgress}}
          </div>
        </div>
      </div>
    </div>
    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="Spark/History">
    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="object-list">
          {{#if runs.length}}
            <table class="table table-condensed">
            <thead>
              <tr><th style="width: 300px;">Started</th>
              <th>Ended</th>
              <th style="width:250px;">Result</th>
              </tr>
            </thead>
            <tbody>
            {{#each runs}}
              <tr class="run-list">
                <td>{{started}}<div class="flow-run-date"> {{startDate}} </div></td>
                <td>{{ended}} <div class="flow-run-date"> {{endDate}}</div></td>
                <td>{{detail}}</td>
              </tr>
            {{/each}}
            </tbody>
            </table>
          {{else}}
            <div class="object-list-empty">
            <div class="object-list-empty-content">
            <div>No History.</div>
            <span>This Spark job has not completed a run yet.</span>
            </div>
            </div>
          {{/if}}
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Flow">

    <div id="title">
      {{view C.Embed.TimeSelector}}
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo FlowStatus model}}Status{{/linkTo}}</li>
        <li>{{#linkTo Flow.Log model}}Log{{/linkTo}}</li>
        <li>{{#linkTo Flow.History model}}History{{/linkTo}}</li>
      </ul>
      <h1><span>Flow</span> <a {{bindAttr href="model.appHref"}}>{{model.app}}</a> : {{model.meta.name}}</h1>
    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="FlowStatus">

    <div id="info">
      <div class="info-box" style="float: right; border: 0;padding-right: 14px;padding-left: 0px;">
        <div id="action-buttons" class="btn-group pull-right">
          <button class="btn btn-blank dropdown-toggle" data-toggle="dropdown">
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
            <li style="min-width:200px; padding:4px 16px 2px;">
              {{#each model.getMeta}}
                <div><strong>{{k}}</strong>: {{v}}
              {{/each}}
            </li>
          </ul>
          <div class="start-stop-wrapper">
            <button class="btn btn-blank start-stop" {{bindAttr disabled="model.startStopDisabled"}} style="width:64px;" {{action "exec" on="click"}}><span {{bindAttr class="model.actionIcon"}}></span><span>{{model.defaultAction}}</span></button>
          </div>
          <button class="btn btn-blank btn-icon" style="border-right:0;" {{bindAttr disabled="model.startStopDisabled"}} {{action "config"}}><span class="btn-config"></span></button>
        </div>
        <div class="flow-state"><strong>{{model.currentState}}</strong></div>
      </div>

      <div class="info-box sparkline-box app-processed">{{view C.Embed.Chart metrics="/system/apps/{parent}/flows/{id}/process.events.processed" title="Processing Rate"}}</div>
      <div class="info-box sparkline-box app-busyness">{{view C.Embed.Chart metrics="/system/apps/{parent}/flows/{id}/process.busyness" title="Busyness" unit="percent"}}</div>

    </div>

    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="flowviz-container">

          <div class="btn-group" style="float: left;">
            <button class="btn btn-blank dropdown-toggle" data-toggle="dropdown" style="padding-left:14px;float: right;">
              {{flowletLabelName}} <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
              <li><a {{action "setFlowletLabel" "rate"}}>Flowlet Rate</a></li>
              <li><a {{action "setFlowletLabel" "pending"}}>Flowlet Pending</a></li>
              <li><a {{action "setFlowletLabel" "aggregate"}}>Flowlet Processed</a></li>
            </ul>
          </div>

          {{view C.Embed.Visualizer viewName="visualizer"}}
        </div>
      </div>
    </div>

    {{outlet}}

  </script>

  <!-- Flowlet Status Template -->

   <script type="text/x-handlebars" data-template-name="FlowStatus/Flowlet">

    <div class="popup-modal">

      <div class="popup-container">
        <div class="popup-body">
          <div class="popup-close" {{action close on="click"}}>×</div>

          <div class="popup-icon"></div>

          <h1 class="popup-title"> {{model.name}}</h1>
          <div class="btn-group" style="margin-top: 4px; width: 100%">
            <div style="display: inline-block; width: 50%">
              <button style="border:0;" disabled="disabled" class="btn btn-blank">Instances Provisioned: {{model.actualInstances}}</button>
            </div>
            <div style="display: inline-block; width: 50%">
              <button style="border:0;" disabled="disabled" class="btn btn-blank">Instances Requested: </button>
              {{input keyUp=keyPressed action="changeInstances" id="instancesInput" class="btn btn-blank" placeholder=model.instances value=instancesInput}}
              <button class="btn btn-blank btn-set" disabled="true" {{action "changeInstances" on="click"}}>SET</button>
            </div>
          </div>
          <br />
          <br />

          <div id="flowlet-popup-tabs">
            <div id="flowlet-popup-inputs-tab" class="flowlet-popup-tab tab-selected"><a href="#" {{action select "inputs"}}>Inputs</a></div>
            <div id="flowlet-popup-processed-tab" class="flowlet-popup-tab"><a href="#" {{action select "processed"}}>Processed</a></div>
            <div id="flowlet-popup-outputs-tab" class="flowlet-popup-tab"><a href="#" {{action select "outputs"}}>Outputs</a></div>
            </div>
          <div id="flowlet-popup-tab-content">

            <div id="flowlet-popup-inputs" class="flowlet-popup-tab-content">

            {{#if model.inputs.length}}
              <table style="width:100%;">
                <tr>
                  <td style="height:214px;padding:0;">
                    <table style="width: 100%;">
                      <tbody>
                      {{#each model.inputs}}
                      <tr>
                        <td class="flowlet-parser">
                          {{#each contrib}}
                            <div {{action navigate name on="click"}} {{bindAttr flowlet-id="name"}} class="flowlet-popup-input-contrib">{{name}}</div>
                          {{/each}}
                        </td>
                        <td class="flowlet-popup-input">
                          {{id}}
                        </td>
                        <td class="flowlet-blue">
                          {{view C.Embed.Chart grid="true" entityType="Queue" title="Inbound Events per Second" width="305" entityIdBinding=id metrics="/system/apps/{app}/flows/{flow}/flowlets/{flowlet}/process.events.in" classNames="sparkline-flowlet-box"}}
                        </td>
                      </tr>
                      {{/each}}
                    </table>
                  </td>
                </tr>
              </table>
            {{else}}
              <div class="flowlet-popup-empty">
              There are no inputs on this flowlet.
              </div>
            {{/if}}

          </div>

          <div id="flowlet-popup-processed" class="flowlet-popup-tab-content">

            <table style="width: 100%">
              <tr>
                <td class="flowlet-blue">
                  {{view C.Embed.Chart grid="true" width="305" metrics="/system/apps/{app}/flows/{flow}/flowlets/{id}/process.events.processed" classNames="sparkline-flowlet-box" title="Processing Rate"}}
                </td>
                <td class="flowlet-blue">
                  {{view C.Embed.Chart grid="true" width="305" metrics="/system/apps/{app}/flows/{flow}/flowlets/{id}/store.ops" classNames="sparkline-flowlet-box" title="Data Operations"}}
                </td>
              </tr>
              <tr>
                <td class="flowlet-blue">
                  {{view C.Embed.Chart grid="true" width="305" unit="percent" metrics="/system/apps/{app}/flows/{flow}/flowlets/{id}/process.busyness" classNames="sparkline-flowlet-box" title="Busyness"}}
                </td>
                <td class="flowlet-blue">
                  {{view C.Embed.Chart grid="true" width="305" metrics="/system/apps/{app}/flows/{flow}/flowlets/{id}/process.errors" classNames="sparkline-flowlet-box" title="Errors"}}
                </td>
              </tr>
            </table>

          </div>

          <div id="flowlet-popup-outputs" class="flowlet-popup-tab-content">
            {{#if model.outputs.length}}
            <table style="width:100%;">
              <tr>
                <td style="height:214px;padding:0;">
                  <table style="width:100%;">
                    <tbody>
                      {{#each model.outputs}}
                      <tr>
                      <td class="flowlet-blue">
                        {{view C.Embed.Chart grid="true" entityType="Queue" title="Outbound Events per Second" width="305" entityIdBinding=id metrics="/system/apps/{app}/flows/{flow}/flowlets/{flowlet}/process.events.out" classNames="sparkline-flowlet-box"}}
                      </td>
                      <td class="flowlet-popup-input">
                      {{id}}
                      </td>
                      <td>
                      {{#each contrib}}
                      <div {{action navigate name on="click"}} {{bindAttr flowlet-id="name"}} class="flowlet-popup-input-contrib">{{name}}</div>
                      {{/each}}
                      </td>
                      </tr>
                      {{/each}}
                    </tbody>
                  </table>
                </td>
              </tr>
            </table>
            {{else}}
              <div class="flowlet-popup-empty">
              There are no outputs on this flowlet.
              </div>
            {{/if}}
          </div>
        </div>
      </div>
    </div>
  </div>

  </script>


  <!-- Stream Status Template -->

  <script type="text/x-handlebars" data-template-name="FlowStatus/Stream">

    <div class="popup-modal">
      <div class="popup-container">
        <div class="popup-body">
          <div class="popup-close" {{action close on="click"}}>×</div>

          <div class="popup-icon-stream"></div>
          <h1 class="popup-title"><a {{bindAttr href="controller.model.href"}}>{{model.name}}</a></h1>

          <table class="table" class="popup-stream-table">
            <thead>
            <th style="width: 100px;text-align: center;">Storage</th>
            <th style="width: 100px;text-align: center;">Events</th>
            <th style="width: 295px;">Events per Second</th>
            </thead>
            <tbody>
            <tr>
            <td class="app-list-count" {{bindAttr title="model.storageRaw"}}>{{model.storageLabel}}<br /><span>{{model.storageUnits}}</span></td>
            <td class="app-list-count" {{bindAttr title="model.eventsRaw"}}>{{model.eventsLabel}}{{model.eventsUnits}}<br /><span>Events</span></td>
            <td style="padding-right: 0;max-width:295px;">
            {{view C.Embed.Chart entityType="Stream" width="376" mode="singular" metrics="/system/streams/{id}/collect.events"}}
            </td>
            </tr>
            </tbody>
          </table>

          <div class="popup-inject-wrapper">
            {{view C.Embed.Injector placeholder="Events injected here will be consumed by all attached programs."}}
            <button class="btn btn-blank" style="float: right;" {{action "inject" on="click"}}>Inject</button>
            <span class="sparkline-box-title">
            {{view Em.Checkbox checkedBinding=controller.injectOnEnter}} Inject by pressing Enter
            </span>

          </div>

        </div>
      </div>
    </div>

  </script>

  <script type="text/x-handlebars" data-template-name="Flow/History">

    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="object-list">
          {{#if runs.length}}
            <table class="table table-condensed">
            <thead>
              <tr><th style="width: 300px;">Started</th>
              <th>Ended</th>
              <th style="width:250px;">Result</th>
              </tr>
            </thead>
            <tbody>
            {{#each runs}}
              <tr class="run-list">
                <td>{{started}}<div class="flow-run-date"> {{startDate}} </div></td>
                <td>{{ended}} <div class="flow-run-date"> {{endDate}}</div></td>
                <td>{{detail}}</td>
              </tr>
            {{/each}}
            </tbody>
            </table>
          {{else}}
            <div class="object-list-empty">
            <div class="object-list-empty-content">
            <div>No History.</div>
            <span>This Flow has not completed a run yet.</span>
            </div>
            </div>
          {{/if}}
        </div>
      </div>
      <div class="panel">
        <div id="flowviz-container" class="flowviz-fade">
          {{view C.Embed.Visualizer viewName="visualizer"}}
        </div>
      </div>
    </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="Dataset">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1><span>Dataset</span> {{model.name}}</h1>
    </div>
    <div id="info">
      <div class="info-box sparkline-box write-rate">{{view C.Embed.Chart title="Write Rate (Bytes)" metrics="/system/datasets/{id}/dataset.store.bytes" unit="bytes"}}</div>
      <div class="info-box sparkline-box write-rate">{{view C.Embed.Chart title="Write Rate (Ops)" metrics="/system/datasets/{id}/dataset.store.writes" unit="OPS/S"}}</div>
      <div class="info-box sparkline-box read-rate">{{view C.Embed.Chart title="Read Rate (Ops)" metrics="/system/datasets/{id}/dataset.store.reads" unit="OPS/S"}}</div>

      <div class="info-box app-storage" style="text-align: center;">
        <div class="sparkline-box-title">Stored</div>
        <div class="sparkline-box-value" style="padding-left: 0;padding-top:16px;width: 100px;">{{model.storageLabel}}<br /><span>{{model.storageUnits}}</span></div>
      </div>

    </div>
    <div id="panels">

      <div class="panel">
        <div class="panel-head"><div class="panel-title">Attached Flows</div>
      </div>

        {{partial "flows-list"}}

    </div>
  </script>

<script type="text/x-handlebars" data-template-name="Procedure">

    <div id="title">
      {{view C.Embed.TimeSelector}}
      <ul class="nav nav-pills pull-right" style="margin: 2px 14px;">
        <li>{{#linkTo ProcedureStatus model}}Status{{/linkTo}}</li>
        <li>{{#linkTo Procedure.Log model}}Log{{/linkTo}}</li>
        <li>{{#linkTo Procedure.History model}}History{{/linkTo}}</li>
      </ul>
      <h1><span>Procedure</span> <a {{bindAttr href="model.appHref"}}>{{model.app}}</a> : {{model.name}}</h1>
    </div>

    {{outlet}}

  </script>

<script type="text/x-handlebars" data-template-name="ProcedureStatus">

    <div id="info">
      <div class="info-box" style="float: right; border: 0;">
        <div id="action-buttons" class="btn-group pull-right">
          <button class="btn btn-blank" {{bindAttr disabled="model.startStopDisabled"}} style="width:64px;" {{action "exec" on="click"}}><span {{bindAttr class="model.actionIcon"}}></span><span>{{model.defaultAction}}</span></button>
          <button class="btn btn-blank btn-icon" {{bindAttr disabled="model.startStopDisabled"}} {{action "config"}}><span class="btn-config"></span></button>
        </div>
        <div class="flow-state"><strong>{{model.currentState}}</strong></div>
      </div>

      <div class="info-box sparkline-box">{{view C.Embed.Chart title="Request Rate" metrics="/system/apps/{parent}/procedures/{id}/query.requests"}}</div>
      <div class="info-box sparkline-box">{{view C.Embed.Chart title="Error Rate" metrics="/system/apps/{parent}/procedures/{id}/query.failures"}}</div>
    </div>
    <div id="panels">

      <div class="panel">
      <div class="panel-head">
        <div class="panel-title">Make a Request
          <div class="btn-group" style="float: right;">
            <div>
              <button style="border:0;padding-right:120px;" disabled="disabled" class="btn btn-blank">Instances Provisioned: {{actualInstances}}</button>
              <button style="border:0;" disabled="disabled" class="btn btn-blank">Instances Requested: </button>
              {{input keyUp=keyPressed action="changeInstances" id="instancesInput" class="btn btn-blank" placeholder=model.instances value=instancesInput}}
              <button class="btn btn-blank btn-set" style="margin-right: 6px;" disabled="true" {{action "changeInstances" on="click"}}>SET</button>
            </div>
          </div>
        </div>
      </div>

        <table style="width: 100%" class="top-aligned">
          <thead>
          <tr>
            <th style="width: 140px;text-align: left;">
              Method
            </th>
            <th style="text-align: left;">
              Parameters
            </th>
          </tr>
          </thead>
          <tbody>
          <tr>
            <td>
              {{view C.Embed.TextField valueBinding="controllers.Procedure.requestMethod" id="method-name"}}
            </td>
            <td>
              {{view C.Embed.Injector valueBinding="controllers.Procedure.requestParams"}}
              <br />
              {{#if model.running}}
              <button id="execute-button" {{action "submit"}} class="btn btn-blank">Execute</button>
              {{else}}
              <button disabled="disabled" class="btn btn-blank">Click "Start" Above</button>
              {{/if}}
            </td>

          </tr>
          </tbody>
        </table>
      </div>

      <div class="panel" style="padding: 10px;">
        {{view Ember.TextArea valueBinding="responseBody" classNames="well query-response"}}
      </div>

    </div>

    {{outlet}}

  </script>

  <script type="text/x-handlebars" data-template-name="Procedure/History">
    <div id="panels">
      <div id="informer"></div>
      <div class="panel">
        <div id="object-list">
          {{#if runs.length}}
            <table class="table table-condensed">
            <thead>
              <tr><th style="width: 300px;">Started</th>
              <th>Ended</th>
              <th style="width:250px;">Result</th>
              </tr>
            </thead>
            <tbody>
            {{#each runs}}
              <tr class="run-list">
                <td>{{started}}<div class="flow-run-date"> {{startDate}} </div></td>
                <td>{{ended}} <div class="flow-run-date"> {{endDate}}</div></td>
                <td>{{detail}}</td>
              </tr>
            {{/each}}
            </tbody>
            </table>
          {{else}}
            <div class="object-list-empty">
            <div class="object-list-empty-content">
            <div>No History.</div>
            <span>This Procedure job has not completed a run yet.</span>
            </div>
            </div>
          {{/if}}
        </div>
      </div>
    </div>
  </script>


  <script type="text/x-handlebars" data-template-name="ColorPicker">
    <input type="text" class="color-picker" {{action setMetricRequestColor controller.metricsRequest.color}} {{ bindAttr value="controller.metricsRequest.color"}} />
  </script>

  <script type="text/x-handlebars" data-template-name="Analyze">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <div style="float: right;margin-top: 2px;">
        <button class="btn btn-blank pause force-margin-right-20" {{action togglePause}}>{{pausedLabel}}</button>
      </div>
      <h1>Metrics <span>Explorer</span></h1>
    </div>
    <div id="panels">
      <div class="panel" id="analyze-selected">
        <div class="clearfix">

          <div class="analyze-selected">
            <ul>

            {{#each metric in selected}}
              <li class="analyze-selected-metric">
                <div class="analyze-selected-metric-remove" {{action removeFromChart metric}}>&times;</div>
                <div class="analyze-selected-metric-color" style="background: {{unbound metric.color}}"></div>
                <div class="analyze-selected-metric-element"><a href="{{unbound metric.href}}">{{metric.element}}</a></div>
                <div class="analyze-selected-metric-name">{{metric.metric}}</div>
              </li>
            {{/each}}

              <li class="analyze-selected-metric-add" {{action showConfigure}}>
                <div class="analyze-selected-metric-color">+</div>
                <div class="analyze-selected-metric-element">Add</div>
              </li>

            </ul>

            <div id="analyze-configurator">
              <input type="hidden" id="elementSelector" />
              <input type="hidden" id="metricSelector" disabled="disabled" />
              <button {{bindAttr disabled="configuring.noSelection"}} class="analyze-gray-btn btn-add" {{action addToChart}}>Add</button>
              <button class="analyze-gray-btn" {{action hideConfigure}}>Cancel</button>
            </div>

        </div>

      </div>

    </div>

    <div class="panel analyze-chart">
      <div class="panel-body">
        {{#if selected.length}}
          <div id="y_axis"></div>
          {{view C.Embed.Analyze}}
        {{else}}
          <div class="object-list-empty" style="height:500px;padding-top:220px;">
            <div class="object-list-empty-content">
              <div>No metrics selected.</div>
              <span>Please add a metric on the right.</span>
            </div>
          </div>
        {{/if}}
      </div>
    </div>

    </div>

  </script>


  <script type="text/x-handlebars" data-template-name="PageNotFound">

    <div id="panels">

      <div class="panel">

        <div class="panel-head">
          <div class="panel-title">Not Found</div>
        </div>
        <div class="object-list-empty">
          <div class="object-list-empty-content">
            <div>Page not found.</div>
            <span>Please double check the URL above.</span>
          </div>
        </div>

      </div>
    </div>

  </script>

  <!-- Shared -->

  <script type="text/x-handlebars" data-template-name="Runnable/Config">

    <div class="popup-modal config-modal">
      <div class="popup-container">
        <div class="popup-body">
          <div class="popup-close" {{action close on="click"}}>×</div>
          <h2>Runtime Configuration</h2>

          {{view C.Embed.KeyVal}}

        </div>
          <div class="modal-footer">
            <button {{action close}} class="btn btn-blank">Cancel</button>
            <button {{action clear}} style="margin-right: 5px;" class="btn btn-blank">Clear</button>
            {{#if runnable}}
              {{#if model.running}}
                <button {{action save}} class="btn btn-blank">Save and Close</button>
                <button {{action saveAndRestart}} class="btn btn-blank">Save and Restart</button>
              {{else}}
                <button {{action runOnce}} class="btn btn-blank">Run Once</button>
                <button {{action saveAndRun}} class="btn btn-blank">Save and Run</button>
              {{/if}}
            {{else}}
            <button {{action save}} class="btn btn-blank">Save and Close</button>
            {{/if}}
          </div>
      </div>
    </div>

  </script>

  <script type="text/x-handlebars" data-template-name="Runnable/Log">

    <div id="panels">
      <div class="panel" style="padding: 10px;">
        <ul class="nav nav-tabs">
          <li {{bindAttr class="logMetrics.ALL.active"}}><a {{ action showLogsByType "ALL" }}>ALL({{logMetrics.ALL.count}})</a></li>
          <li {{bindAttr class="logMetrics.INFO.active"}}><a {{ action showLogsByType "INFO" }}>INFO({{logMetrics.INFO.count}})</a></li>
          <li {{bindAttr class="logMetrics.WARN.active"}}><a {{ action showLogsByType "WARN" }}>WARN({{logMetrics.WARN.count}})</a></li>
          <li {{bindAttr class="logMetrics.ERROR.active"}}><a id="log-error-tab" {{ action showLogsByType "ERROR" }}>ERROR({{logMetrics.ERROR.count}})</a></li>
          <li {{bindAttr class="logMetrics.DEBUG.active"}}><a {{ action showLogsByType "DEBUG" }}>DEBUG({{logMetrics.DEBUG.count}})</a></li>
          <li {{bindAttr class="logMetrics.OTHER.active"}}><a {{ action showLogsByType "OTHER" }}>OTHER({{logMetrics.OTHER.count}})</a></li>
        </ul>
        <pre id="logView" class="well query-response"></pre>
      </div>
    </div>

  </script>

  <!-- Partials -->

  <script type="text/x-handlebars" data-template-name="tree-branch">
    {{each children itemController="treeNode" itemViewClass="C.TreeNodeView"}}
  </script>

  <script data-template-name="tree-node" type="text/x-handlebars">

    <div class="tree-node">

      <div class="tree-chart">
        {{view C.Embed.Chart entityIdBinding=id entityTypeBinding=type height="50" unit="bytes" listMode="true" metrictype="memory"}}
      </div>

      <div class="tree-count app-list-count">{{coresLabel}}</div>

      <div class="tree-count app-list-count">{{containersLabel}}</div>

      <div class="tree-toggle">
        {{#if model.children.length}}
          <span {{bindAttr class=":toggle-icon children.length::leaf"}} {{action toggle}}>
            {{#if isExpanded}}
                &#x25BC;
            {{else}}
                &#x25B6;
            {{/if}}
          </span>
        {{else}}
          &#183;
        {{/if}}
      </div>
      <div class="tree-element app-list-name">
        <a {{bindAttr href="href"}}>{{name}}</a><br />
        <span class="app-list-status">{{description}}</span>
      </div>

    </div>

    {{#if isExpanded}}
      {{control "treeBranch" model}}
    {{/if}}

  </script>

  <script type="text/x-handlebars" data-template-name="_programs-list">

    {{#if structure.children.length}}
      <table class="table">
        <thead>
          <th>Elements</th>
          <th style="width: 80px;text-align: center;">Containers</th>
          <th style="width: 80px;text-align: center;">Cores</th>
          <th style="width: 262px;">Memory</th>
        </thead>
      </table>
      {{control "treeBranch" structure}}

    {{else}}
      <div class="object-list-empty">
      <div class="object-list-empty-content">
      <div>No Applications.</div>
      <span>Please navigate to the Overview screen to load one.</span>
      </div>
      </div>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="_apps-list">
    {{#if elements.App.length}}
      <table class="table">
        <thead>
        <th>&nbsp;</th>
          <th style="text-align: center;width:64px;">Collect</th>
          <th style="text-align: center;width:64px;">Process</th>
          <th style="text-align: center;width:64px;">Store</th>
          <th style="text-align: center;width:64px;">Query</th>
        <th style="width: 262px;">Busyness</th>
        </thead>
        <tbody>
        {{#each elements.App }}
          <tr>
            <td class="app-list-name">
            <a {{bindAttr href="href"}}>{{name}}</a>
            <br />
            <span class="app-list-status">{{description}}</span>

            </td>
            <td class="app-list-count">{{counts.Stream}}</strong></td>
            <td class="app-list-count">{{counts.Flow}}</strong></td>
            <td class="app-list-count">{{counts.Dataset}}</strong></td>
            <td class="app-list-count">{{counts.Procedure}}</strong></td>
            <td style="max-width:264px;">{{view C.Embed.Chart entityIdBinding=id entityType="App" height="50" metrics="/system/apps/{id}/process.busyness" unit="percent"}}</td>
          </tr>
        {{/each}}
        </tbody>
      </table>
    {{else}}
      <div class="object-list-empty">
      <div class="object-list-empty-content">
      <div>No Applications.</div>
      <span>Load an Application by clicking the button above.</span>
      </div>
      </div>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="list-page">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <h1><span>Data</span> {{controller.title}}</h1>
    </div>

    <div id="panels">
      <div class="panel">
        {{outlet}}
      </div>
    </div>
  </script>

<script type="text/x-handlebars" data-template-name="datasets-list-page">
    <div id="title">
      {{view C.Embed.TimeSelector}}
      <div class="pull-right">
      {{#if C.Env.explore_enabled}}
         <a class="btn-custom" id="explore-button" href="/#/dataexplore/query">Explore</a>
      {{else}}
        <li class="disabled">
          <a class="btn-custom"
             id="explore-button"
          >Explore</a>
        </li>
      {{/if}}

      </div>
      <h1><span>Data</span> {{controller.title}}</h1>
    </div>

    <div id="panels">
      <div class="panel">
        {{outlet}}
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="_streams-list">

    {{#if elements.Stream.length}}
      <table class="table streams-table">
      <thead>
        <th style="padding-left: 14px;">Streams</th>
        <th style="width: 100px;text-align: center;">Storage</th>
        <th style="width: 100px;padding: 3px 0px 0px;text-align: center;">Events</th>
        <th style="width: 262px;">Arrival Rate (EPS)</th>
      </thead>
      <tbody>
        {{#each elements.Stream }}
          <tr>
            <td class="app-list-name">
            <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status">Stream</span>
            </td>
            <td class="app-list-count">{{storageLabel}}<span>{{storageUnits}}</span></td>
            <td class="app-list-count">{{eventsLabel}}{{eventsUnits}}</td>
            <td style="max-width:262px;">{{view C.Embed.Chart entityIdBinding=id entityType="Stream" mode="singular" metrics="/system/streams/{id}/collect.events"}}</td>
          </tr>
        {{/each}}
      </tbody>
      </table>
    {{else}}
      <div class="object-list-empty">
        <div class="object-list-empty-content">
          <div>No Streams.</div>
            <span>Please create one in code or on the commandline.</span>
        </div>
      </div>
    {{/if}}

  </script>

  <script type="text/x-handlebars" data-template-name="_flows-list">
    {{#if elements.Flow.length}}
      <table class="table">
        <thead>
          <th style="padding-left: 14px;">Flows</th>
          <th style="width: 262px;">Processing Rate (EPS)</th>
          <th style="width: 262px;">Busyness</th>
        </thead>
        <tbody>
        {{#each elements.Flow.content }}
          <tr>
            <td class="app-list-name">
            <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status app-status">{{currentState}}</span>
            </td>
            <td style="max-width:262px;">{{view C.Embed.Chart entityIdBinding=id entityType="Flow" metrics="/system/apps/{parent}/flows/{id}/process.events.processed"}}</td>
            <td style="max-width:262px;">{{view C.Embed.Chart entityIdBinding=id entityType="Flow" metrics="/system/apps/{parent}/flows/{id}/process.busyness" unit="percent"}}</td>
          </tr>
        {{/each}}
        </tbody>
      </table>
    {{else}}
      <div class="object-list-empty">
        <div class="object-list-empty-content">
          <div>No Flows.</div>
          <span>Add Flows by uploading an Application JAR.</span>
        </div>
      </div>
    {{/if}}
    {{#if elements.Mapreduce.length}}
      <table class="table">
          <thead>
            <th style="padding-left: 14px;">Mapreduce</th>
            <th style="width: 262px;">Mapping Status</th>
            <th style="width: 262px;">Reducing Status</th>
          </thead>
          <tbody>
          {{#each elements.Mapreduce.content }}
            <tr>
              <td class="app-list-name">
              <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status app-status">{{currentState}}</span>
              </td>
              <td style="max-width:262px;">{{view C.Embed.Chart entityIdBinding=id entityType="Mapreduce" metrics="/system/apps/{parent}/mapreduce/{id}/mappers/process.completion" unit="percent"}}</td>
              <td style="max-width:262px;">{{view C.Embed.Chart entityIdBinding=id entityType="Mapreduce" metrics="/system/apps/{parent}/mapreduce/{id}/reducers/process.completion" unit="percent"}}</td>
            </tr>
          {{/each}}
          </tbody>
        </table>
    {{/if}}
    {{#if C.isLocal}}
        {{#if elements.Spark.length}}
          <table class="table">
              <thead>
                <th style="padding-left: 14px;">Spark</th>
              </thead>
              <tbody>
              {{#each elements.Spark.content }}
                <tr>
                  <td class="app-list-name">
                  <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status app-status">{{currentState}}</span>
                  </td>
                </tr>
              {{/each}}
              </tbody>
            </table>
        {{/if}}
    {{/if}}
    {{#if elements.Workflow.length}}
      <table class="table">
          <thead>
            <th style="padding-left: 14px;">Workflows</th>
          </thead>
          <tbody>
          {{#each elements.Workflow.content }}
            <tr>
              <td class="app-list-name">
              <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status app-status">{{currentState}}</span>
              </td>
            </tr>
          {{/each}}
          </tbody>
        </table>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="_datasets-list">
    {{#if elements.Dataset.length}}
      <table class="table">
        <thead>
        <th style="padding-left: 14px;">DataSets</th>
        <th style="width: 100px;text-align: center;">Storage</th>
        <th style="width: 262px;">Write Rate (Bytes)</th>
        </thead>
        <tbody>
        {{#each elements.Dataset }}
          <tr>
            <td class="app-list-name">
              <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status">{{classname}}</span>
            </td>
            <td class="app-list-count">{{storageLabel}}<br /><span>{{storageUnits}}</span></td>
            <td style="max-width:262px;">{{view C.Embed.Chart entityIdBinding=id entityType="Dataset" mode="singular" metrics="/system/datasets/{id}/dataset.store.bytes"}}</td>
          </tr>
        {{/each}}
        </tbody>
      </table>
    {{else}}
    <div class="object-list-empty">
      <div class="object-list-empty-content">
        <div>No DataSets.</div>
          <span>Please create one in code or on the commandline.</span>
        </div>
    </div>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="_userservices-list">
    {{#if elements.Userservice.length}}
      <table class="table">
      <thead>
        <th style="padding-left: 14px;">Services</th>
        <th class="center-align" style="width: 262px;">Number of Workers</th>
      </thead>
      <tbody>
        {{#each elements.Userservice}}
          <tr>
            <td class="app-list-name">
            <a {{bindAttr href="href"}}>{{name}}</a><br /><span class="app-list-status app-status">{{currentState}}</span>
            </td>
            <td class="app-list-count">{{numWorkers}}</td>
          </tr>
        {{/each}}
      </tbody>
      </table>
    {{else}}
    <div class="object-list-empty">
    <div class="object-list-empty-content">
    <div>No Userservices.</div>
    <span>Add Userservices by uploading an Application JAR.</span>
    </div>
    </div>
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="Loading">
    <div id="services-loading">
      <div class="services-box">
        <div {{bindAttr class=":animated loadingComplete:force-invisible:force-shown" }} id="loading-animation">
          <img src="assets/img/services-loading.gif" />Loading Services...
        </div>
        <a {{bindAttr class=":btn :btn-blank loadingComplete:force-shown:force-hidden" }} id="goto-btn" href="/#/overview">Go to Overview </a>
        <ul class="services-list">
          {{#each serviceStatuses}}
          <li class="service">
            <span class="lowercasify">{{this.name}}</span>
            <span {{ bindAttr class=":service-icon this.imgClass" }} ></span>
          </li>
          {{/each}}
        </ul>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="ConnectionError">
    <div id="services-loading">
      <div class="services-box">
        <div class="animated large">
          There seems to be a connection problem... <br />
          Please wait.
        </div>
      </div>
    </div>
  </script>

  <script type="text/x-handlebars" data-template-name="SparkMetricsProgressBar">
    <div class="progress stage-status-line">
      <div data-toggle="tooltip" data-placement="top" title="Running" class="progress-bar running"
       {{bindAttr style=view.runningWidth}}>{{model.metricsData.schedulerRunningStages}}</div>
      <div data-toggle="tooltip" data-placement="bottom" title="Failed" class="progress-bar failed"
       {{bindAttr style=view.failedWidth}}>{{model.metricsData.schedulerFailedStages}}</div>
      <div data-toggle="tooltip" data-placement="top" title="Waiting" class="progress-bar waiting"
       {{bindAttr style=view.waitingWidth}}>{{model.metricsData.schedulerWaitingStages}}</div>
    </div>
  </script>

</body>
</html>
