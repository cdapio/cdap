<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright © 2014 Cask Data, Inc." name="copyright" />
<script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55077523-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>CDAP Authentication Client for Java &mdash; Cask Data Application Platform 2.6.1 Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.6.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 2.6.1 Documentation" href="../index.html" />
    <link rel="up" title="Security" href="index.html" />
    <link rel="next" title="CDAP Authentication Client for Python" href="cdap-authentication-clients-python.html" />
    <link rel="prev" title="Client Authentication" href="client-authentication.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="cdap-authentication-clients-python.html" title="CDAP Authentication Client for Python"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="client-authentication.html" title="Client Authentication"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/cdap/json-versions.js"/></script>
        <script>window.setVersion('2.6.1');</script>
       
        <li><a href="../table-of-contents.html">CDAP Developers’ Manual</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Security</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="cdap-authentication-client-for-java">
<h1>CDAP Authentication Client for Java<a class="headerlink" href="#cdap-authentication-client-for-java" title="Permalink to this headline">¶</a></h1>
<p>The Authentication Client API can be used for fetching the access token
from the CDAP authentication server to interact with a secure CDAP
cluster.</p>
<div class="section" id="supported-actions">
<h2>Supported Actions<a class="headerlink" href="#supported-actions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Check that authentication is enabled in the CDAP cluster.</li>
<li>Fetch an access token from the authentication server with credentials
supported by the active authentication mechanism.</li>
</ul>
<p>The default implementation of the authentication
client—<tt class="docutils literal"><span class="pre">BasicAuthenticationClient</span></tt>—supports the default
authentication mechanisms supported by CDAP:</p>
<ul class="simple">
<li>Basic Authentication</li>
<li>LDAP</li>
<li>JASPI</li>
</ul>
</div>
<div class="section" id="custom-authentication-mechanism">
<h2>Custom Authentication Mechanism<a class="headerlink" href="#custom-authentication-mechanism" title="Permalink to this headline">¶</a></h2>
<p>If CDAP is configured to use a custom authentication mechanism, a custom
authentication client will have to be written to fetch the access token.
The custom authentication clients needs to implement the
<tt class="docutils literal"><span class="pre">AuthenticationClient</span></tt> interface. The <tt class="docutils literal"><span class="pre">AbstractAuthenticationClient</span></tt>
class contains common functionality required by authentication clients,
and can be extended by the custom authentication client. The custom
authentication client has to be placed into the classpath of the
application that needs to use it.</p>
</div>
<div class="section" id="build">
<h2>Build<a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h2>
<p>To build the Authentication Client API jar, use:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">mvn clean package</span>
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>To use the Authentication Client API, include this Maven dependency in
your project&#8217;s <tt class="docutils literal"><span class="pre">pom.xml</span></tt> file:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;dependency&gt;</span>
<span class="go">  &lt;groupId&gt;co.cask.cdap&lt;/groupId&gt;</span>
<span class="go">  &lt;artifactId&gt;cdap-authentication-client&lt;/artifactId&gt;</span>
<span class="go">  &lt;version&gt;1.1.0-SNAPSHOT&lt;/version&gt;</span>
<span class="go">&lt;/dependency&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-an-authentication-client-instance">
<h3>Create an Authentication Client instance<a class="headerlink" href="#create-an-authentication-client-instance" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><div class="highlight"><pre><span class="go">String defaultAuthClientClass =</span>
<span class="go">  &quot;co.cask.cdap.security.authentication.client.basic.BasicAuthenticationClient&quot;;</span>
<span class="go">String authClientClassName =</span>
<span class="go">   properties.getProperty(&quot;security.auth.client.class.name&quot;, defaultAuthClientClass);</span>
<span class="go">AuthenticationClient authenticationClient =</span>
<span class="go">   (AuthenticationClient) Class.forName(authClientClassName).newInstance();</span>
</pre></div>
</div>
<p>Creating an Authentication Client using a configuration parameter as
shown above allows plugging in custom implementations of Authentication
Client.</p>
</div>
<div class="section" id="set-the-cdap-connection-information">
<h3>Set the CDAP connection information<a class="headerlink" href="#set-the-cdap-connection-information" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>hostname</li>
<li>port</li>
<li>boolean flag, true if SSL is enabled</li>
</ul>
<p>Example:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">authenticationClient.setConnectionInfo(&quot;localhost&quot;, 10000, false);</span>
</pre></div>
</div>
<p>This method should be called only once for every
<tt class="docutils literal"><span class="pre">AuthenticationClient</span></tt> object.</p>
</div>
<div class="section" id="check-if-authentication-is-enabled-in-the-cdap-cluster">
<h3>Check if authentication is enabled in the CDAP cluster<a class="headerlink" href="#check-if-authentication-is-enabled-in-the-cdap-cluster" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><div class="highlight"><pre><span class="go">boolean isEnabled = authenticationClient.isAuthEnabled();</span>
</pre></div>
</div>
</div>
<div class="section" id="configure-authentication-client">
<h3>Configure Authentication Client<a class="headerlink" href="#configure-authentication-client" title="Permalink to this headline">¶</a></h3>
<p>If authentication is enabled, configure the Authentication Client with
user credentials and other properties (this method should be called only
once for every <tt class="docutils literal"><span class="pre">AuthenticationClient</span></tt> object).</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">authenticationClient.configure(properties);</span>
</pre></div>
</div>
<p><strong>Note:</strong></p>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">BasicAuthenticationClient</span></tt> requires these user credentials:<ul>
<li><tt class="docutils literal"><span class="pre">security.auth.client.username=username</span></tt></li>
<li><tt class="docutils literal"><span class="pre">security.auth.client.password=password</span></tt></li>
</ul>
</li>
<li>When SSL is enabled, to suspend certificate checks and allow
self-signed certificates, set
<tt class="docutils literal"><span class="pre">security.auth.client.verify.ssl.cert=false</span></tt>.</li>
<li>For non-interactive applications, user credentials will come from a
configuration file.</li>
<li>For interactive applications, see the section <a class="reference external" href="#interactive-applications">Interactive
Applications</a> below on retrieving and
using user credentials.</li>
</ul>
</div>
<div class="section" id="retrieve-the-access-token-for-the-user-from-the-authentication-server-and-use-it">
<h3>Retrieve the access token for the user from the authentication server, and use it<a class="headerlink" href="#retrieve-the-access-token-for-the-user-from-the-authentication-server-and-use-it" title="Permalink to this headline">¶</a></h3>
<div class="highlight-console"><div class="highlight"><pre><span class="go">HttpURLConnection conn = (HttpURLConnection) cdapURL.openConnection();</span>
<span class="go">conn.setRequestProperty(&quot;Authorization&quot;,</span>
<span class="go">           authenticationClient.getAccessToken().getTokenType() + &quot; &quot; +</span>
<span class="go">           authenticationClient.getAccessToken().getValue());</span>
<span class="go">// ...</span>
<span class="go">conn.connect();</span>
</pre></div>
</div>
<p>If there is an error while fetching the access token, an <tt class="docutils literal"><span class="pre">IOException</span></tt>
will be thrown. The Authentication Client caches the access token until
the token expires. It automatically re-fetches a new token upon expiry.</p>
</div>
</div>
<div class="section" id="interactive-applications">
<h2>Interactive Applications<a class="headerlink" href="#interactive-applications" title="Permalink to this headline">¶</a></h2>
<p>This example illustrates obtaining user credentials in an interactive
application, and then configuring the Authentication Client with the
retrieved credentials.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">authenticationClient.setConnectionInfo(hostname, port, ssl);</span>
<span class="go">Properties properties = new Properties();</span>

<span class="go">if (authenticationClient.isAuthEnabled()) {</span>
<span class="go">  ConsoleReader reader = new ConsoleReader();</span>
<span class="go">  for (Credential credential : authenticationClient.getRequiredCredentials()) {</span>
<span class="go">    String credentialValue;</span>
<span class="go">    output.printf(&quot;Please, specify &quot;  credential.getDescription()  &quot;&gt; &quot;);</span>
<span class="go">    if (credential.isSecret()) {</span>
<span class="go">        credentialValue = reader.readLine(prompt, &#39;*&#39;);</span>
<span class="go">    } else {</span>
<span class="go">      credentialValue = reader.readLine(prompt);</span>
<span class="go">    }</span>
<span class="go">    properties.put(credential.getName(), credentialValue);</span>
<span class="go">  }</span>

<span class="go">  authenticationClient.configure(properties);</span>
<span class="go">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="manuals links">
    <h3><a href="../table-of-contents/../../index.html"
        rel="nofollow">CDAP Documentation v2.6.1</a></h3>
    <ul class="this-page-menu">
      <li><a href="../table-of-contents/../../index.html"
            rel="nofollow">Introduction</a></li>
      <li><b><a href="../table-of-contents/../../developers-manual/index.html"
            rel="nofollow">Developers’ Manual</a></b></li>
      <li><a href="../table-of-contents/../../admin-manual/index.html"
            rel="nofollow">Administration Manual</a></li>
      <li><a href="../table-of-contents/../../examples-manual/index.html"
            rel="nofollow">Examples, Guides, and Tutorials</a></li>
      <li><a href="../table-of-contents/../../reference-manual/index.html"
            rel="nofollow">Reference Manual</a></li>
      <li><a href="../table-of-contents/../../reference-manual/release-notes.html"
            rel="nofollow">Release Notes</a></li>
      <li><a href="../table-of-contents/../../reference-manual/glossary.html"
            rel="nofollow">Glossary</a></li>
      <li><a href="../table-of-contents/../../reference-manual/faq.html"
            rel="nofollow">FAQ</a></li>
      <li><a href="../table-of-contents/../../search.html"
            rel="nofollow">Search</a></li>
    </ul>
   </div><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


<h3 class="pagenavtitle"><a href="../table-of-contents.html">Developers’ Manual: Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html"> Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../overview/index.html"> Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building-blocks/index.html"> Building Blocks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html"> Security</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="client-authentication.html">Client Authentication</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">CDAP Authentication Client for Java</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#supported-actions">Supported Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#custom-authentication-mechanism">Custom Authentication Mechanism</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build">Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interactive-applications">Interactive Applications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cdap-authentication-clients-python.html">CDAP Authentication Client for Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom-authentication.html">Custom Authentication</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../testing/index.html"> Testing and Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ingesting-tools/index.html"> Ingesting Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html"> Advanced Topics</a></li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="client-authentication.html"
                        title="Previous Chapter">Client Authentication</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="cdap-authentication-clients-python.html"
                        title="Next Chapter">CDAP Authentication Client for Python</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/2.6.1/cdap-docs-2.6.1-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
  
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Client Authentication" href="client-authentication.html" />Client Authentication</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        &copy; Copyright 2014-2015 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="CDAP Authentication Client for Python" href="cdap-authentication-clients-python.html" />CDAP Authentication Client for Python</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>