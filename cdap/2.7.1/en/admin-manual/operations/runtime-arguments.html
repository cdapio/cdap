<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="Cask Data, Inc." name="author" />
<meta content="Copyright © 2014-2015 Cask Data, Inc." name="copyright" />
<script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-55081520-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    <title>Runtime Arguments &mdash; Cask Data Application Platform 2.7.1 Documentation</title>
    
    <link rel="stylesheet" href="../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.7.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 2.7.1 Documentation" href="../index.html" />
    <link rel="up" title="Operations" href="index.html" />
    <link rel="next" title="Scaling Instances" href="scaling-instances.html" />
    <link rel="prev" title="Metrics" href="metrics.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="scaling-instances.html" title="Scaling Instances"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="metrics.html" title="Metrics"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/cdap/json-versions.js"/></script>
        <script>window.setVersion('2.7.1');</script>
       
        <li><a href="../table-of-contents.html">CDAP Administration Manual</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Operations</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="runtime-arguments">
<h1>Runtime Arguments<a class="headerlink" href="#runtime-arguments" title="Permalink to this headline">¶</a></h1>
<div class="topic">
<p class="topic-title first"><strong>Note: Procedures Deprecated</strong></p>
<p>As of <em>CDAP v2.6.0</em>, <em>Procedures</em> have been deprecated, pending removal in a later
version. Replace all use of <em>Procedures</em> with <em>Services</em>. <em>Services</em> will have
feature-parity with <em>Procedures</em> as of the version in which Procedures are removed.</p>
</div>
<p>Flows, Procedures, MapReduce programs, and Workflows can receive runtime arguments:</p>
<ul class="simple">
<li>For Flows and Procedures, runtime arguments are available to the <tt class="docutils literal"><span class="pre">initialize</span></tt> method in the context.</li>
<li>For MapReduce, runtime arguments are available to the <tt class="docutils literal"><span class="pre">beforeSubmit</span></tt> and <tt class="docutils literal"><span class="pre">onFinish</span></tt> methods in the context.
The <tt class="docutils literal"><span class="pre">beforeSubmit</span></tt> method can pass them to the Mappers and Reducers through the job configuration.</li>
<li>When a Workflow receives runtime arguments, it passes them to each MapReduce in the Workflow.</li>
</ul>
<p>The <tt class="docutils literal"><span class="pre">initialize()</span></tt> method in this example accepts a runtime argument for the
<tt class="docutils literal"><span class="pre">TweetCollector</span></tt> Flowlet. For example, we can disable using the Public Twitter Source
or provide Twitter API credentials:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TweetCollector</span> <span class="kd">extends</span> <span class="n">AbstractFlowlet</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">Logger</span> <span class="n">LOG</span> <span class="o">=</span> <span class="n">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">TweetCollector</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

  <span class="kd">private</span> <span class="n">OutputEmitter</span><span class="o">&lt;</span><span class="n">Tweet</span><span class="o">&gt;</span> <span class="n">output</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">CollectingThread</span> <span class="n">collector</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">BlockingQueue</span><span class="o">&lt;</span><span class="n">Tweet</span><span class="o">&gt;</span> <span class="n">queue</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">Metrics</span> <span class="n">metrics</span><span class="o">;</span>

  <span class="kd">private</span> <span class="n">TwitterStream</span> <span class="n">twitterStream</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="n">FlowletContext</span> <span class="n">context</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">initialize</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">args</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="na">getRuntimeArguments</span><span class="o">();</span>

    <span class="k">if</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&quot;disable.public&quot;</span><span class="o">))</span> <span class="o">{</span>
      <span class="n">String</span> <span class="n">publicArg</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;disable.public&quot;</span><span class="o">);</span>
      <span class="n">LOG</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">&quot;Public Twitter source turned off (disable.public={})&quot;</span><span class="o">,</span> <span class="n">publicArg</span><span class="o">);</span>
      <span class="k">return</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="k">if</span> <span class="o">(!</span><span class="n">args</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&quot;oauth.consumerKey&quot;</span><span class="o">)</span> <span class="o">||</span> <span class="o">!</span><span class="n">args</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&quot;oauth.consumerSecret&quot;</span><span class="o">)</span>
     <span class="o">||</span> <span class="o">!</span><span class="n">args</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&quot;oauth.accessToken&quot;</span><span class="o">)</span> <span class="o">||</span> <span class="o">!</span><span class="n">args</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">&quot;oauth.accessTokenSecret&quot;</span><span class="o">))</span> <span class="o">{</span>
      <span class="kd">final</span> <span class="n">String</span> <span class="n">CREDENTIALS_MISSING</span> <span class="o">=</span> <span class="s">&quot;Twitter API credentials not provided in runtime arguments.&quot;</span><span class="o">;</span>
      <span class="n">LOG</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="n">CREDENTIALS_MISSING</span><span class="o">);</span>
<span class="c1">//      throw new IllegalArgumentException(CREDENTIALS_MISSING);</span>
    <span class="o">}</span>

    <span class="n">queue</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedBlockingQueue</span><span class="o">&lt;</span><span class="n">Tweet</span><span class="o">&gt;(</span><span class="mi">10000</span><span class="o">);</span>
    <span class="n">collector</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CollectingThread</span><span class="o">();</span>
    <span class="n">collector</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
  <span class="o">}</span>
</pre></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="manuals links">
    <h3><a href="../table-of-contents/../../index.html"
        rel="nofollow">CDAP Documentation v2.7.1</a></h3>
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../table-of-contents/../../index.html"
            rel="nofollow">Introduction</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../developers-manual/index.html"
            rel="nofollow">Developers’ Manual</a></li>
            
      <li><div class=""></div><b><a href="../table-of-contents/../../admin-manual/index.html"
            rel="nofollow">Administration Manual</a></b></li>
            
      <li><div class="new-icon"></div><a href="../table-of-contents/../../integrations/index.html"
            rel="nofollow">Integrations</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../examples-manual/index.html"
            rel="nofollow">Examples, Guides, and Tutorials</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/index.html"
            rel="nofollow">Reference Manual</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/release-notes.html"
            rel="nofollow">Release Notes</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/glossary.html"
            rel="nofollow">Glossary</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../reference-manual/faq.html"
            rel="nofollow">FAQ</a></li>
            
      <li><div class=""></div><a href="../table-of-contents/../../search.html"
            rel="nofollow">Search</a></li>
    </ul>
   </div><!--
  Copyright © 2014-2015 Cask Data, Inc.

  Licensed under the Apache License, Version 2.0 (the "License"); you may not
  use this file except in compliance with the License. You may obtain a copy of
  the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
  License for the specific language governing permissions and limitations under
  the License.
-->


<h3 class="pagenavtitle"><a href="../table-of-contents.html">Administration Manual:<br> Table&nbsp;of&nbsp;Contents</a></h3>
<nav class="pagenav">
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html"> Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html"> Operations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="logging.html"> Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html"> Metrics</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href=""> Runtime Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="scaling-instances.html"> Scaling Instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdap-console.html"> CDAP Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="troubleshooting.html"> Troubleshooting</a></li>
</ul>
</li>
</ul>

</nav>
  <h4>Previous Topic</h4>
  <p class="topless"><a href="metrics.html"
                        title="Previous Chapter">Metrics</a></p>
  <h4>Next Topic</h4>
  <p class="topless"><a href="scaling-instances.html"
                        title="Next Chapter">Scaling Instances</a></p>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/2.7.1/cdap-docs-2.7.1-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
  
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>
  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Metrics" href="metrics.html" />Metrics</a>&nbsp;&nbsp;
    
    </th>
    <th class="tg-s6z2">
        Copyright &copy; 2014-2015 Cask Data, Inc.
    
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Scaling Instances" href="scaling-instances.html" />Scaling Instances</a>
    
    </th>
  </tr>
</table>

    </div>
  </body>
</html>