<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KWLFGH');</script>
    <!-- End Google Tag Manager -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    
    
    <meta name="git_release" content="3.5.3">
    <meta name="git_hash" content="df76fc573ba695366c529aad811217c43a173769">
    <meta name="git_timestamp" content="2017-01-21 16:09:27 -0800">
    <title>Snapshot Parquet &mdash; Cask Data Application Platform 3.5.3 Documentation</title>

    <link rel="canonical" href="http://docs.cask.co/cdap/3.5.3/en/hydrator-manual/plugins/sinks/snapshotparquet-batchsink.html">

    
    <link rel="stylesheet" href="../../_static/cdap.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/annotator.min.css" type="text/css" />



    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.5.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/copy-to-clipboard.js"></script>
    <script type="text/javascript" src="../../_static/tabbed-parsed-literal.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="top" title="Cask Data Application Platform 3.5.3 Documentation" href="../../index.html" />
    <link rel="up" title="Sink Plugins" href="index.html" />
    <link rel="next" title="Table" href="table-batchsink.html" />
    <link rel="prev" title="Snapshot Avro" href="snapshotavro-batchsink.html" /> 
  </head>
  <body role="document">

    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KWLFGH"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="table-batchsink.html" title="Table"
             accesskey="N">Next</a> |</li>
        <li class="right" >
          <a href="snapshotavro-batchsink.html" title="Snapshot Avro"
             accesskey="P">Previous</a> |</li>
        
        <script type="text/javascript" src="../../_static/version-menu.js"></script>
        <script src="http://docs.cask.co/cdap/json-versions.js"/></script>
        <script>window.setVersion('3.5.3');</script>
       
        <li><a href="../../table-of-contents.html">Cask Hydrator</a> &raquo;</li>
          <li><a href="../index.html" >Plugin Reference</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Sink Plugins</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div id="documentwrapper" class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="snapshot-parquet">
<span id="snapshot-parquet"></span><h1><a class="headerlink" href="#snapshot-parquet" title="Perma-link to this heading">ðŸ”—</a>Snapshot Parquet</h1>
<div class="section" id="description">
<span id="description"></span><h2><a class="headerlink" href="#description" title="Perma-link to this heading">ðŸ”—</a>Description</h2>
<p>A batch sink for a PartitionedFileSet that writes snapshots of data as a new
partition. Data is written in Parquet format. A corresponding SnapshotParquet source
can be used to read only the most recently written snapshot.</p>
</div>
<div class="section" id="use-case">
<span id="use-case"></span><h2><a class="headerlink" href="#use-case" title="Perma-link to this heading">ðŸ”—</a>Use Case</h2>
<p>This sink is used whenever you want access to a PartitionedFileSet containing exactly the
most recent run's data in Parquet format. For example, you might want to create daily
snapshots of a database by reading the entire contents of a table, writing to this sink,
and then other programs can analyze the contents of the specified file.</p>
</div>
<div class="section" id="properties">
<span id="properties"></span><h2><a class="headerlink" href="#properties" title="Perma-link to this heading">ðŸ”—</a>Properties</h2>
<p><strong>name:</strong> Name of the PartitionedFileSet to which records are written.
If it doesn't exist, it will be created. (Macro-enabled)</p>
<p><strong>schema:</strong> The Parquet schema of the record being written to the sink as a JSON object.</p>
<p><strong>basePath:</strong> Base path for the PartitionedFileSet. Defaults to the name of the dataset. (Macro-enabled)</p>
<p><strong>fileProperties:</strong> Advanced feature to specify any additional properties that should be used with the sink,
specified as a JSON object of string to string. These properties are set on the dataset if one is created.
The properties are also passed to the dataset at runtime as arguments. (Macro-enabled)</p>
<p><strong>cleanPartitionsOlderThan:</strong> Optional property that configures the sink to delete partitions older than a specified date-time after a successful run.
If set, when a run successfully finishes, the sink will subtract this amount of time from the runtime and delete any delete any partitions for time partitions older than that.
The format is expected to be a number followed by an 's', 'm', 'h', or 'd' specifying the time unit, with 's' for seconds,
'm' for minutes, 'h' for hours, and 'd' for days. For example, if the pipeline is scheduled to run at midnight of January 1, 2016,
and this property is set to 7d, the sink will delete any partitions for time partitions older than midnight Dec 25, 2015. (Macro-enabled)</p>
</div>
<div class="section" id="example">
<span id="example"></span><h2><a class="headerlink" href="#example" title="Perma-link to this heading">ðŸ”—</a>Example</h2>
<p>This example will write to a PartitionedFileSet named 'users'. It will write data in Parquet format
using the given schema. Every time the pipeline runs, the most recent run will be stored in
a new partition in the PartitionedFileSet:</p>
<pre class="literal-block">
{
    &quot;name&quot;: &quot;SnapshotParquet&quot;,
    &quot;type&quot;: &quot;batchsink&quot;,
    &quot;properties&quot;: {
        &quot;name&quot;: &quot;users&quot;,
        &quot;schema&quot;: &quot;{
            \&quot;type\&quot;:\&quot;record\&quot;,
            \&quot;name\&quot;:\&quot;user\&quot;,
            \&quot;fields\&quot;:[
                {\&quot;name\&quot;:\&quot;id\&quot;,\&quot;type\&quot;:\&quot;long\&quot;},
                {\&quot;name\&quot;:\&quot;name\&quot;,\&quot;type\&quot;:\&quot;string\&quot;},
                {\&quot;name\&quot;:\&quot;birthyear\&quot;,\&quot;type\&quot;:\&quot;int\&quot;}
            ]
        }&quot;
    }
}
</pre>
<hr class="docutils" />
<ul class="simple">
<li>Hydrator Plugin Type: batchsink</li>
<li>Hydrator Version: 1.4.1</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

  <div role="note" aria-label="manuals links">
    <h3><a href="../../table-of-contents/../../index.html" rel="nofollow">CDAP Documentation v3.5.3</a></h3>
    
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../../table-of-contents/../../introduction/index.html" rel="nofollow">Introduction to CDAP</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../developers-manual/index.html" rel="nofollow">Developersâ€™ Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../admin-manual/index.html" rel="nofollow">Administration Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../integrations/index.html" rel="nofollow">Integrations</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../examples-manual/index.html" rel="nofollow">Examples, Guides, and Tutorials</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/index.html" rel="nofollow">Reference Manual</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../faqs/index.html" rel="nofollow">FAQs</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/release-notes.html" rel="nofollow">Release Notes</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../reference-manual/glossary.html" rel="nofollow">Glossary</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../search.html" rel="nofollow">Search</a></li>
    </ul>
    <h3 class="cdap-extensions">CDAP Extensions</h3>
    
    <ul class="this-page-menu">
      <li><div class=""></div><a href="../../table-of-contents/../../hydrator-manual/index.html" rel="nofollow">Cask Hydrator</a></li>
      <li><div class=""></div><a href="../../table-of-contents/../../tracker-manual/index.html" rel="nofollow">Cask Tracker</a></li>
    </ul>
  </div>
    
  <h3 class="pagenavtitle"><a href="../../table-of-contents.html">Cask Hydrator: Table&nbsp;of&nbsp;Contents</a></h3>
    <nav class="pagenav">
    <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html"> Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts-design.html"> Concepts and Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started.html"> Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../studio.html"> Hydrator Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../creating-pipelines.html"> Creating Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../running-pipelines.html"> Running Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugin-management.html"> Plugin Management</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html"> Plugin Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../actions/index.html"> Action Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sources/index.html"> Source Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transforms/index.html"> Transform Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../analytics/index.html"> Analytic Plugins</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html"> Sink Plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cassandra-batchsink.html">Cassandra</a></li>
<li class="toctree-l3"><a class="reference internal" href="cube-batchsink.html">Cube</a></li>
<li class="toctree-l3"><a class="reference internal" href="database-batchsink.html">Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="elasticsearch-batchsink.html">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="hbase-batchsink.html">HBase</a></li>
<li class="toctree-l3"><a class="reference internal" href="hdfs-batchsink.html">HDFS</a></li>
<li class="toctree-l3"><a class="reference internal" href="hive-batchsink.html">Hive</a></li>
<li class="toctree-l3"><a class="reference internal" href="kvtable-batchsink.html">KeyValueTable</a></li>
<li class="toctree-l3"><a class="reference internal" href="mongodb-batchsink.html">MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3avro-batchsink.html">Amazon S3 Avro</a></li>
<li class="toctree-l3"><a class="reference internal" href="s3parquet-batchsink.html">Amazon S3 Parquet</a></li>
<li class="toctree-l3"><a class="reference internal" href="snapshotavro-batchsink.html">Snapshot Avro</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Snapshot Parquet</a></li>
<li class="toctree-l3"><a class="reference internal" href="table-batchsink.html">Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="tpfsavro-batchsink.html">TimePartitionedFileSet Avro</a></li>
<li class="toctree-l3"><a class="reference internal" href="tpfsorc-batchsink.html">TimePartitionedFileSet ORC</a></li>
<li class="toctree-l3"><a class="reference internal" href="tpfsparquet-batchsink.html">TimePartitionedFileSet Parquet</a></li>
<li class="toctree-l3"><a class="reference internal" href="cassandra-realtimesink.html">Cassandra</a></li>
<li class="toctree-l3"><a class="reference internal" href="cube-realtimesink.html">Cube</a></li>
<li class="toctree-l3"><a class="reference internal" href="elasticsearch-realtimesink.html">Elasticsearch</a></li>
<li class="toctree-l3"><a class="reference internal" href="kafkaproducer-realtimesink.html">Kafka Producer</a></li>
<li class="toctree-l3"><a class="reference internal" href="mongodb-realtimesink.html">MongoDB</a></li>
<li class="toctree-l3"><a class="reference internal" href="stream-realtimesink.html">Stream</a></li>
<li class="toctree-l3"><a class="reference internal" href="table-realtimesink.html">Table</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../shared-plugins/index.html"> Shared Plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../post-run-plugins/index.html"> Post-run Plugins</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developing-pipelines.html"> Developing Pipelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developing-plugins/index.html"> Developing Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how-hydrator-works.html"> How Hydrator Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faqs.html"> FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html"> Glossary</a></li>
</ul>
 
    </nav>
  
<div id="searchbox" style="display: none" role="search">
  <h3>Quick Search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <div role="note" aria-label="downloads links">
    <h3>Downloads</h3>
    <ul class="this-page-menu">
      <li><a href="http://docs.cask.co/cdap/3.5.3/cdap-docs-3.5.3-web.zip"
            rel="nofollow">Zip Archive of CDAP Documentation</a></li>
    </ul>
   </div>
<div role="note" aria-label="other links">
    <h3><a href="http://docs.cask.co/" target="_blank">Documentation</a></h3>
    <ul class="this-page-menu">
        <li><a href="http://docs.cask.co/cdap/index.html" target="_blank">CDAP</a></li>
        <li><a href="http://docs.cask.co/coopr/index.html" target="_blank">Coopr</a></li>
        <li><a href="http://docs.cask.co/tigon/index.html" target="_blank">Tigon</a></li>
    </ul>
</div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">

<style type="text/css">
.tg  {border-collapse:collapse;border-spacing:0;margin:0px auto;}
.tg td{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg th{padding:0px 20px 0px 20px;border-width:0px;overflow:hidden;word-break:normal;font-weight:normal;}
.tg .tg-s6z2{text-align:center;}
.tg .tg-0ord{text-align:right;}
.tg a{font-weight:bold;}
</style>
<table class="tg" width= 100%>

  <tr>
    <th class="tg-031e">Previous Topic: 
    <a title="Snapshot Avro" href="snapshotavro-batchsink.html" />Snapshot Avro</a>&nbsp;&nbsp;
    </th>
    
    <th class="tg-s6z2">
        Copyright &copy; 2014-2017 Cask Data, Inc.
      &bull; Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1.
    </th>
    <th class="tg-0ord">&nbsp;&nbsp;Next Topic:
    <a title="Table" href="table-batchsink.html" />Table</a>
    </th>

  </tr>
</table>

    </div>
  </body>
</html>